"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
require("source-map-support/register");
var _logger = _interopRequireDefault(require("../logger.js"));
var _lodash = _interopRequireDefault(require("lodash"));
var _helpers = require("../helpers.js");
var _bluebird = _interopRequireDefault(require("bluebird"));
const lockManagementMethods = {};
const CREDENTIAL_CANNOT_BE_NULL_OR_EMPTY_ERROR = `Credential can't be null or empty`;
const CREDENTIAL_DID_NOT_MATCH_ERROR = `didn't match`;
const SUPPORTED_LOCK_CREDENTIAL_TYPES = ['password', 'pin', 'pattern'];
const KEYCODE_POWER = 26;
const KEYCODE_WAKEUP = 224;
const HIDE_KEYBOARD_WAIT_TIME = 100;
function buildCommand(verb, oldCredential = null, ...args) {
  const cmd = ['locksettings', verb];
  if (!_lodash.default.isEmpty(oldCredential)) {
    cmd.push('--old', oldCredential);
  }
  if (!_lodash.default.isEmpty(args)) {
    cmd.push(...args);
  }
  return cmd;
}
async function swipeUp(windowDumpsys) {
  const dimensionsMatch = /init=(\d+)x(\d+)/.exec(windowDumpsys);
  if (!dimensionsMatch) {
    throw new Error('Cannot retrieve the display size');
  }
  const displayWidth = parseInt(dimensionsMatch[1], 10);
  const displayHeight = parseInt(dimensionsMatch[2], 10);
  const x0 = displayWidth / 2;
  const y0 = displayHeight / 5 * 4;
  const x1 = x0;
  const y1 = displayHeight / 5;
  await this.shell(['input', 'touchscreen', 'swipe', ...[x0, y0, x1, y1].map(c => Math.trunc(c))]);
}
lockManagementMethods.isLockManagementSupported = async function isLockManagementSupported() {
  if (!_lodash.default.isBoolean(this._isLockManagementSupported)) {
    const passFlag = '__PASS__';
    let output = '';
    try {
      output = await this.shell([`locksettings help && echo ${passFlag}`]);
    } catch (ign) {}
    this._isLockManagementSupported = _lodash.default.includes(output, passFlag);
    _logger.default.debug(`Extended lock settings management is ` + `${this._isLockManagementSupported ? '' : 'not '}supported`);
  }
  return this._isLockManagementSupported;
};
lockManagementMethods.verifyLockCredential = async function verifyLockCredential(credential = null) {
  try {
    const {
      stdout,
      stderr
    } = await this.shell(buildCommand('verify', credential), {
      outputFormat: this.EXEC_OUTPUT_FORMAT.FULL
    });
    if (_lodash.default.includes(stdout, 'verified successfully')) {
      return true;
    }
    if ([`didn't match`, CREDENTIAL_CANNOT_BE_NULL_OR_EMPTY_ERROR].some(x => _lodash.default.includes(stderr || stdout, x))) {
      return false;
    }
    throw new Error(stderr || stdout);
  } catch (e) {
    throw new Error(`Device lock credential verification failed. ` + `Original error: ${e.stderr || e.stdout || e.message}`);
  }
};
lockManagementMethods.clearLockCredential = async function clearLockCredential(credential = null) {
  try {
    const {
      stdout,
      stderr
    } = await this.shell(buildCommand('clear', credential), {
      outputFormat: this.EXEC_OUTPUT_FORMAT.FULL
    });
    if (!['user has no password', 'Lock credential cleared'].some(x => _lodash.default.includes(stderr || stdout, x))) {
      throw new Error(stderr || stdout);
    }
  } catch (e) {
    throw new Error(`Cannot clear device lock credential. ` + `Original error: ${e.stderr || e.stdout || e.message}`);
  }
};
lockManagementMethods.isLockEnabled = async function isLockEnabled() {
  try {
    const {
      stdout,
      stderr
    } = await this.shell(buildCommand('get-disabled'), {
      outputFormat: this.EXEC_OUTPUT_FORMAT.FULL
    });
    if (/\bfalse\b/.test(stdout) || [CREDENTIAL_DID_NOT_MATCH_ERROR, CREDENTIAL_CANNOT_BE_NULL_OR_EMPTY_ERROR].some(x => _lodash.default.includes(stderr || stdout, x))) {
      return true;
    }
    if (/\btrue\b/.test(stdout)) {
      return false;
    }
    throw new Error(stderr || stdout);
  } catch (e) {
    throw new Error(`Cannot check if device lock is enabled. Original error: ${e.message}`);
  }
};
lockManagementMethods.setLockCredential = async function setLockCredential(credentialType, credential, oldCredential = null) {
  if (!SUPPORTED_LOCK_CREDENTIAL_TYPES.includes(credentialType)) {
    throw new Error(`Device lock credential type '${credentialType}' is unknown. ` + `Only the following credential types are supported: ${SUPPORTED_LOCK_CREDENTIAL_TYPES}`);
  }
  if (_lodash.default.isEmpty(credential) && !_lodash.default.isInteger(credential)) {
    throw new Error('Device lock credential cannot be empty');
  }
  const cmd = buildCommand(`set-${credentialType}`, oldCredential, credential);
  try {
    const {
      stdout,
      stderr
    } = await this.shell(cmd, {
      outputFormat: this.EXEC_OUTPUT_FORMAT.FULL
    });
    if (!_lodash.default.includes(stdout, 'set to')) {
      throw new Error(stderr || stdout);
    }
  } catch (e) {
    throw new Error(`Setting of device lock ${credentialType} credential failed. ` + `Original error: ${e.stderr || e.stdout || e.message}`);
  }
};
lockManagementMethods.isScreenLocked = async function isScreenLocked() {
  const stdout = await this.shell(['dumpsys', 'window']);
  return (0, _helpers.isShowingLockscreen)(stdout) || (0, _helpers.isCurrentFocusOnKeyguard)(stdout) || !(0, _helpers.isScreenOnFully)(stdout);
};
lockManagementMethods.dismissKeyguard = async function dismissKeyguard() {
  _logger.default.info('Waking up the device to dismiss the keyguard');
  await this.cycleWakeUp();
  if ((await this.getApiLevel()) > 21) {
    await this.shell(['wm', 'dismiss-keyguard']);
    return;
  }
  const stdout = await this.shell(['dumpsys', 'window']);
  if (!(0, _helpers.isCurrentFocusOnKeyguard)(stdout)) {
    _logger.default.debug('The keyguard seems to be inactive');
    return;
  }
  _logger.default.debug('Swiping up to dismiss the keyguard');
  if (await this.hideKeyboard()) {
    await _bluebird.default.delay(HIDE_KEYBOARD_WAIT_TIME);
  }
  _logger.default.debug('Dismissing notifications from the unlock view');
  await this.shell(['service', 'call', 'notification', '1']);
  await this.back();
  await swipeUp.bind(this)(stdout);
};
lockManagementMethods.cycleWakeUp = async function cycleWakeUp() {
  await this.keyevent(KEYCODE_POWER);
  await this.keyevent(KEYCODE_WAKEUP);
};
var _default = lockManagementMethods;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJsb2NrTWFuYWdlbWVudE1ldGhvZHMiLCJDUkVERU5USUFMX0NBTk5PVF9CRV9OVUxMX09SX0VNUFRZX0VSUk9SIiwiQ1JFREVOVElBTF9ESURfTk9UX01BVENIX0VSUk9SIiwiU1VQUE9SVEVEX0xPQ0tfQ1JFREVOVElBTF9UWVBFUyIsIktFWUNPREVfUE9XRVIiLCJLRVlDT0RFX1dBS0VVUCIsIkhJREVfS0VZQk9BUkRfV0FJVF9USU1FIiwiYnVpbGRDb21tYW5kIiwidmVyYiIsIm9sZENyZWRlbnRpYWwiLCJhcmdzIiwiY21kIiwiXyIsImlzRW1wdHkiLCJwdXNoIiwic3dpcGVVcCIsIndpbmRvd0R1bXBzeXMiLCJkaW1lbnNpb25zTWF0Y2giLCJleGVjIiwiRXJyb3IiLCJkaXNwbGF5V2lkdGgiLCJwYXJzZUludCIsImRpc3BsYXlIZWlnaHQiLCJ4MCIsInkwIiwieDEiLCJ5MSIsInNoZWxsIiwibWFwIiwiYyIsIk1hdGgiLCJ0cnVuYyIsImlzTG9ja01hbmFnZW1lbnRTdXBwb3J0ZWQiLCJpc0Jvb2xlYW4iLCJfaXNMb2NrTWFuYWdlbWVudFN1cHBvcnRlZCIsInBhc3NGbGFnIiwib3V0cHV0IiwiaWduIiwiaW5jbHVkZXMiLCJsb2ciLCJkZWJ1ZyIsInZlcmlmeUxvY2tDcmVkZW50aWFsIiwiY3JlZGVudGlhbCIsInN0ZG91dCIsInN0ZGVyciIsIm91dHB1dEZvcm1hdCIsIkVYRUNfT1VUUFVUX0ZPUk1BVCIsIkZVTEwiLCJzb21lIiwieCIsImUiLCJtZXNzYWdlIiwiY2xlYXJMb2NrQ3JlZGVudGlhbCIsImlzTG9ja0VuYWJsZWQiLCJ0ZXN0Iiwic2V0TG9ja0NyZWRlbnRpYWwiLCJjcmVkZW50aWFsVHlwZSIsImlzSW50ZWdlciIsImlzU2NyZWVuTG9ja2VkIiwiaXNTaG93aW5nTG9ja3NjcmVlbiIsImlzQ3VycmVudEZvY3VzT25LZXlndWFyZCIsImlzU2NyZWVuT25GdWxseSIsImRpc21pc3NLZXlndWFyZCIsImluZm8iLCJjeWNsZVdha2VVcCIsImdldEFwaUxldmVsIiwiaGlkZUtleWJvYXJkIiwiQiIsImRlbGF5IiwiYmFjayIsImJpbmQiLCJrZXlldmVudCJdLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xpYi90b29scy9sb2NrbWdtdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbG9nIGZyb20gJy4uL2xvZ2dlci5qcyc7XG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHtcbiAgaXNTaG93aW5nTG9ja3NjcmVlbiwgaXNDdXJyZW50Rm9jdXNPbktleWd1YXJkLCBpc1NjcmVlbk9uRnVsbHksXG59IGZyb20gJy4uL2hlbHBlcnMuanMnO1xuaW1wb3J0IEIgZnJvbSAnYmx1ZWJpcmQnO1xuXG5jb25zdCBsb2NrTWFuYWdlbWVudE1ldGhvZHMgPSB7fTtcblxuY29uc3QgQ1JFREVOVElBTF9DQU5OT1RfQkVfTlVMTF9PUl9FTVBUWV9FUlJPUiA9IGBDcmVkZW50aWFsIGNhbid0IGJlIG51bGwgb3IgZW1wdHlgO1xuY29uc3QgQ1JFREVOVElBTF9ESURfTk9UX01BVENIX0VSUk9SID0gYGRpZG4ndCBtYXRjaGA7XG5jb25zdCBTVVBQT1JURURfTE9DS19DUkVERU5USUFMX1RZUEVTID0gWydwYXNzd29yZCcsICdwaW4nLCAncGF0dGVybiddO1xuY29uc3QgS0VZQ09ERV9QT1dFUiA9IDI2O1xuY29uc3QgS0VZQ09ERV9XQUtFVVAgPSAyMjQ7IC8vIHdvcmtzIG92ZXIgQVBJIExldmVsIDIwXG5jb25zdCBISURFX0tFWUJPQVJEX1dBSVRfVElNRSA9IDEwMDtcblxuZnVuY3Rpb24gYnVpbGRDb21tYW5kICh2ZXJiLCBvbGRDcmVkZW50aWFsID0gbnVsbCwgLi4uYXJncykge1xuICBjb25zdCBjbWQgPSBbJ2xvY2tzZXR0aW5ncycsIHZlcmJdO1xuICBpZiAoIV8uaXNFbXB0eShvbGRDcmVkZW50aWFsKSkge1xuICAgIGNtZC5wdXNoKCctLW9sZCcsIG9sZENyZWRlbnRpYWwpO1xuICB9XG4gIGlmICghXy5pc0VtcHR5KGFyZ3MpKSB7XG4gICAgY21kLnB1c2goLi4uYXJncyk7XG4gIH1cbiAgcmV0dXJuIGNtZDtcbn1cblxuLyoqXG4gKiBQZXJmb3JtcyBzd2lwZSB1cCBnZXN0dXJlIG9uIHRoZSBzY3JlZW5cbiAqXG4gKiBAdGhpcyB7QURCfVxuICogQHBhcmFtIHtzdHJpbmd9IHdpbmRvd0R1bXBzeXMgVGhlIG91dHB1dCBvZiBgYWRiIHNoZWxsIGR1bXBzeXMgd2luZG93YCBjb21tYW5kXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIGRpc3BsYXkgc2l6ZSBjYW5ub3QgYmUgcmV0cmlldmVkXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHN3aXBlVXAgKHdpbmRvd0R1bXBzeXMpIHtcbiAgY29uc3QgZGltZW5zaW9uc01hdGNoID0gL2luaXQ9KFxcZCspeChcXGQrKS8uZXhlYyh3aW5kb3dEdW1wc3lzKTtcbiAgaWYgKCFkaW1lbnNpb25zTWF0Y2gpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCByZXRyaWV2ZSB0aGUgZGlzcGxheSBzaXplJyk7XG4gIH1cbiAgY29uc3QgZGlzcGxheVdpZHRoID0gcGFyc2VJbnQoZGltZW5zaW9uc01hdGNoWzFdLCAxMCk7XG4gIGNvbnN0IGRpc3BsYXlIZWlnaHQgPSBwYXJzZUludChkaW1lbnNpb25zTWF0Y2hbMl0sIDEwKTtcbiAgY29uc3QgeDAgPSBkaXNwbGF5V2lkdGggLyAyO1xuICBjb25zdCB5MCA9IGRpc3BsYXlIZWlnaHQgLyA1ICogNDtcbiAgY29uc3QgeDEgPSB4MDtcbiAgY29uc3QgeTEgPSBkaXNwbGF5SGVpZ2h0IC8gNTtcbiAgYXdhaXQgdGhpcy5zaGVsbChbXG4gICAgJ2lucHV0JywgJ3RvdWNoc2NyZWVuJywgJ3N3aXBlJyxcbiAgICAuLi4oW3gwLCB5MCwgeDEsIHkxXS5tYXAoKGMpID0+IE1hdGgudHJ1bmMoYykpKVxuICBdKTtcbn1cblxuLyoqXG4gKiBDaGVjayB3aGV0aGVyIHRoZSBkZXZpY2Ugc3VwcG9ydHMgbG9jayBzZXR0aW5ncyBtYW5hZ2VtZW50IHdpdGggYGxvY2tzZXR0aW5nc2BcbiAqIGNvbW1hbmQgbGluZSB0b29sLiBUaGlzIHRvb2wgaGFzIGJlZW4gYWRkZWQgdG8gQW5kcm9pZCB0b29sc2V0IHNpbmNlICBBUEkgMjcgT3Jlb1xuICpcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIG1hbmFnZW1lbnQgaXMgc3VwcG9ydGVkLiBUaGUgcmVzdWx0IGlzIGNhY2hlZCBwZXIgQURCIGluc3RhbmNlXG4gKi9cbmxvY2tNYW5hZ2VtZW50TWV0aG9kcy5pc0xvY2tNYW5hZ2VtZW50U3VwcG9ydGVkID0gYXN5bmMgZnVuY3Rpb24gaXNMb2NrTWFuYWdlbWVudFN1cHBvcnRlZCAoKSB7XG4gIGlmICghXy5pc0Jvb2xlYW4odGhpcy5faXNMb2NrTWFuYWdlbWVudFN1cHBvcnRlZCkpIHtcbiAgICBjb25zdCBwYXNzRmxhZyA9ICdfX1BBU1NfXyc7XG4gICAgbGV0IG91dHB1dCA9ICcnO1xuICAgIHRyeSB7XG4gICAgICBvdXRwdXQgPSBhd2FpdCB0aGlzLnNoZWxsKFtgbG9ja3NldHRpbmdzIGhlbHAgJiYgZWNobyAke3Bhc3NGbGFnfWBdKTtcbiAgICB9IGNhdGNoIChpZ24pIHt9XG4gICAgdGhpcy5faXNMb2NrTWFuYWdlbWVudFN1cHBvcnRlZCA9IF8uaW5jbHVkZXMob3V0cHV0LCBwYXNzRmxhZyk7XG4gICAgbG9nLmRlYnVnKGBFeHRlbmRlZCBsb2NrIHNldHRpbmdzIG1hbmFnZW1lbnQgaXMgYCArXG4gICAgICBgJHt0aGlzLl9pc0xvY2tNYW5hZ2VtZW50U3VwcG9ydGVkID8gJycgOiAnbm90ICd9c3VwcG9ydGVkYCk7XG4gIH1cbiAgcmV0dXJuIHRoaXMuX2lzTG9ja01hbmFnZW1lbnRTdXBwb3J0ZWQ7XG59O1xuXG4vKipcbiAqIENoZWNrIHdoZXRoZXIgdGhlIGdpdmVuIGNyZWRlbnRpYWwgaXMgbWF0Y2hlcyB0byB0aGUgY3VycmVudGx5IHNldCBvbmUuXG4gKlxuICogQHBhcmFtIHs/c3RyaW5nfSBjcmVkZW50aWFsIFtudWxsXSBUaGUgY3JlZGVudGlhbCB2YWx1ZS4gSXQgY291bGQgYmUgZWl0aGVyXG4gKiBwaW4sIHBhc3N3b3JkIG9yIGEgcGF0dGVybi4gQSBwYXR0ZXJuIGlzIHNwZWNpZmllZCBieSBhIG5vbi1zZXBhcmF0ZWQgbGlzdFxuICogb2YgbnVtYmVycyB0aGF0IGluZGV4IHRoZSBjZWxsIG9uIHRoZSBwYXR0ZXJuIGluIGEgMS1iYXNlZCBtYW5uZXIgaW4gbGVmdFxuICogdG8gcmlnaHQgYW5kIHRvcCB0byBib3R0b20gb3JkZXIsIGkuZS4gdGhlIHRvcC1sZWZ0IGNlbGwgaXMgaW5kZXhlZCB3aXRoIDEsXG4gKiB3aGVyZWFzIHRoZSBib3R0b20tcmlnaHQgY2VsbCBpcyBpbmRleGVkIHdpdGggOS4gRXhhbXBsZTogMTIzNC5cbiAqIG51bGwvZW1wdHkgdmFsdWUgYXNzdW1lcyB0aGUgZGV2aWNlIGhhcyBubyBsb2NrIGN1cnJlbnRseSBzZXQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBnaXZlbiBjcmVkZW50aWFsIG1hdGNoZXMgdG8gdGhlIGRldmljZSdzIG9uZVxuICogQHRocm93cyB7RXJyb3J9IElmIHRoZSB2ZXJpZmljYXRpb24gZmFjZXMgYW4gdW5leHBlY3RlZCBlcnJvclxuICovXG5sb2NrTWFuYWdlbWVudE1ldGhvZHMudmVyaWZ5TG9ja0NyZWRlbnRpYWwgPSBhc3luYyBmdW5jdGlvbiB2ZXJpZnlMb2NrQ3JlZGVudGlhbCAoY3JlZGVudGlhbCA9IG51bGwpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7c3Rkb3V0LCBzdGRlcnJ9ID0gYXdhaXQgdGhpcy5zaGVsbChidWlsZENvbW1hbmQoJ3ZlcmlmeScsIGNyZWRlbnRpYWwpLCB7XG4gICAgICBvdXRwdXRGb3JtYXQ6IHRoaXMuRVhFQ19PVVRQVVRfRk9STUFULkZVTExcbiAgICB9KTtcbiAgICBpZiAoXy5pbmNsdWRlcyhzdGRvdXQsICd2ZXJpZmllZCBzdWNjZXNzZnVsbHknKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChbYGRpZG4ndCBtYXRjaGAsIENSRURFTlRJQUxfQ0FOTk9UX0JFX05VTExfT1JfRU1QVFlfRVJST1JdXG4gICAgICAgIC5zb21lKCh4KSA9PiBfLmluY2x1ZGVzKHN0ZGVyciB8fCBzdGRvdXQsIHgpKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3Ioc3RkZXJyIHx8IHN0ZG91dCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYERldmljZSBsb2NrIGNyZWRlbnRpYWwgdmVyaWZpY2F0aW9uIGZhaWxlZC4gYCArXG4gICAgICBgT3JpZ2luYWwgZXJyb3I6ICR7ZS5zdGRlcnIgfHwgZS5zdGRvdXQgfHwgZS5tZXNzYWdlfWApO1xuICB9XG59O1xuXG4vKipcbiAqIENsZWFycyBjdXJyZW50IGxvY2sgY3JlZGVudGlhbHMuIFVzdWFsbHkgaXQgdGFrZXMgc2V2ZXJhbCBzZWNvbmRzIGZvciBhIGRldmljZSB0b1xuICogc3luYyB0aGUgY3JlZGVudGlhbCBzdGF0ZSBhZnRlciB0aGlzIG1ldGhvZCByZXR1cm5zLlxuICpcbiAqIEBwYXJhbSB7P3N0cmluZ30gY3JlZGVudGlhbCBbbnVsbF0gVGhlIGNyZWRlbnRpYWwgdmFsdWUuIEl0IGNvdWxkIGJlIGVpdGhlclxuICogcGluLCBwYXNzd29yZCBvciBhIHBhdHRlcm4uIEEgcGF0dGVybiBpcyBzcGVjaWZpZWQgYnkgYSBub24tc2VwYXJhdGVkIGxpc3RcbiAqIG9mIG51bWJlcnMgdGhhdCBpbmRleCB0aGUgY2VsbCBvbiB0aGUgcGF0dGVybiBpbiBhIDEtYmFzZWQgbWFubmVyIGluIGxlZnRcbiAqIHRvIHJpZ2h0IGFuZCB0b3AgdG8gYm90dG9tIG9yZGVyLCBpLmUuIHRoZSB0b3AtbGVmdCBjZWxsIGlzIGluZGV4ZWQgd2l0aCAxLFxuICogd2hlcmVhcyB0aGUgYm90dG9tLXJpZ2h0IGNlbGwgaXMgaW5kZXhlZCB3aXRoIDkuIEV4YW1wbGU6IDEyMzQuXG4gKiBudWxsL2VtcHR5IHZhbHVlIGFzc3VtZXMgdGhlIGRldmljZSBoYXMgbm8gbG9jayBjdXJyZW50bHkgc2V0LlxuICogQHRocm93cyB7RXJyb3J9IElmIG9wZXJhdGlvbiBmYWNlcyBhbiB1bmV4cGVjdGVkIGVycm9yXG4gKi9cbmxvY2tNYW5hZ2VtZW50TWV0aG9kcy5jbGVhckxvY2tDcmVkZW50aWFsID0gYXN5bmMgZnVuY3Rpb24gY2xlYXJMb2NrQ3JlZGVudGlhbCAoY3JlZGVudGlhbCA9IG51bGwpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7c3Rkb3V0LCBzdGRlcnJ9ID0gYXdhaXQgdGhpcy5zaGVsbChidWlsZENvbW1hbmQoJ2NsZWFyJywgY3JlZGVudGlhbCksIHtcbiAgICAgIG91dHB1dEZvcm1hdDogdGhpcy5FWEVDX09VVFBVVF9GT1JNQVQuRlVMTFxuICAgIH0pO1xuICAgIGlmICghWyd1c2VyIGhhcyBubyBwYXNzd29yZCcsICdMb2NrIGNyZWRlbnRpYWwgY2xlYXJlZCddXG4gICAgICAgIC5zb21lKCh4KSA9PiBfLmluY2x1ZGVzKHN0ZGVyciB8fCBzdGRvdXQsIHgpKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKHN0ZGVyciB8fCBzdGRvdXQpO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGNsZWFyIGRldmljZSBsb2NrIGNyZWRlbnRpYWwuIGAgK1xuICAgICAgYE9yaWdpbmFsIGVycm9yOiAke2Uuc3RkZXJyIHx8IGUuc3Rkb3V0IHx8IGUubWVzc2FnZX1gKTtcbiAgfVxufTtcblxuLyoqXG4gKiBDaGVja3Mgd2hldGhlciB0aGUgZGV2aWNlIGlzIGxvY2tlZCB3aXRoIGEgY3JlZGVudGlhbCAoZWl0aGVyIHBpbiBvciBhIHBhc3N3b3JkXG4gKiBvciBhIHBhdHRlcm4pLlxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufSBgdHJ1ZWAgaWYgdGhlIGRldmljZSBpcyBsb2NrZWRcbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiBvcGVyYXRpb24gZmFjZXMgYW4gdW5leHBlY3RlZCBlcnJvclxuICovXG5sb2NrTWFuYWdlbWVudE1ldGhvZHMuaXNMb2NrRW5hYmxlZCA9IGFzeW5jIGZ1bmN0aW9uIGlzTG9ja0VuYWJsZWQgKCkge1xuICB0cnkge1xuICAgIGNvbnN0IHtzdGRvdXQsIHN0ZGVycn0gPSBhd2FpdCB0aGlzLnNoZWxsKGJ1aWxkQ29tbWFuZCgnZ2V0LWRpc2FibGVkJyksIHtcbiAgICAgIG91dHB1dEZvcm1hdDogdGhpcy5FWEVDX09VVFBVVF9GT1JNQVQuRlVMTFxuICAgIH0pO1xuICAgIGlmICgvXFxiZmFsc2VcXGIvLnRlc3Qoc3Rkb3V0KVxuICAgICAgICB8fCBbQ1JFREVOVElBTF9ESURfTk9UX01BVENIX0VSUk9SLCBDUkVERU5USUFMX0NBTk5PVF9CRV9OVUxMX09SX0VNUFRZX0VSUk9SXS5zb21lKFxuICAgICAgICAgICh4KSA9PiBfLmluY2x1ZGVzKHN0ZGVyciB8fCBzdGRvdXQsIHgpKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICgvXFxidHJ1ZVxcYi8udGVzdChzdGRvdXQpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcihzdGRlcnIgfHwgc3Rkb3V0KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGNoZWNrIGlmIGRldmljZSBsb2NrIGlzIGVuYWJsZWQuIE9yaWdpbmFsIGVycm9yOiAke2UubWVzc2FnZX1gKTtcbiAgfVxufTtcblxuLyoqXG4gKiBTZXRzIHRoZSBkZXZpY2UgbG9jay5cbiAqXG4gKiBAcGFyYW0geyFzdHJpbmd9IGNyZWRlbnRpYWxUeXBlIE9uZSBvZjogcGFzc3dvcmQsIHBpbiwgcGF0dGVybi5cbiAqIEBwYXJhbSB7IXN0cmluZ30gY3JlZGVudGlhbCBBIG5vbi1lbXB0eSBjcmVkZW50aWFsIHZhbHVlIHRvIGJlIHNldC5cbiAqIE1ha2Ugc3VyZSB5b3VyIG5ldyBjcmVkZW50aWFsIG1hdGNoZXMgdG8gdGhlIGFjdHVhbCBzeXN0ZW0gc2VjdXJpdHkgcmVxdWlyZW1lbnRzLFxuICogZS5nLiBhIG1pbmltdW0gcGFzc3dvcmQgbGVuZ3RoLiBBIHBhdHRlcm4gaXMgc3BlY2lmaWVkIGJ5IGEgbm9uLXNlcGFyYXRlZCBsaXN0XG4gKiBvZiBudW1iZXJzIHRoYXQgaW5kZXggdGhlIGNlbGwgb24gdGhlIHBhdHRlcm4gaW4gYSAxLWJhc2VkIG1hbm5lciBpbiBsZWZ0XG4gKiB0byByaWdodCBhbmQgdG9wIHRvIGJvdHRvbSBvcmRlciwgaS5lLiB0aGUgdG9wLWxlZnQgY2VsbCBpcyBpbmRleGVkIHdpdGggMSxcbiAqIHdoZXJlYXMgdGhlIGJvdHRvbS1yaWdodCBjZWxsIGlzIGluZGV4ZWQgd2l0aCA5LiBFeGFtcGxlOiAxMjM0LlxuICogQHBhcmFtIHs/c3RyaW5nfSBvbGRDcmVkZW50aWFsIFtudWxsXSBBbiBvbGQgY3JlZGVudGlhbCBzdHJpbmcuXG4gKiBJdCBpcyBvbmx5IHJlcXVpcmVkIHRvIGJlIHNldCBpbiBjYXNlIHlvdSBuZWVkIHRvIGNoYW5nZSB0aGUgY3VycmVudFxuICogY3JlZGVudGlhbCByYXRoZXIgdGhhbiB0byBzZXQgYSBuZXcgb25lLiBTZXR0aW5nIGl0IHRvIGEgd3JvbmcgdmFsdWUgd2lsbFxuICogbWFrZSB0aGlzIG1ldGhvZCB0byBmYWlsIGFuZCB0aHJvdyBhbiBleGNlcHRpb24uXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlcmUgd2FzIGEgZmFpbHVyZSB3aGlsZSB2ZXJpZnlpbmcgaW5wdXQgYXJndW1lbnRzIG9yIHNldHRpbmdcbiAqIHRoZSBjcmVkZW50aWFsXG4gKi9cbmxvY2tNYW5hZ2VtZW50TWV0aG9kcy5zZXRMb2NrQ3JlZGVudGlhbCA9IGFzeW5jIGZ1bmN0aW9uIHNldExvY2tDcmVkZW50aWFsIChcbiAgY3JlZGVudGlhbFR5cGUsIGNyZWRlbnRpYWwsIG9sZENyZWRlbnRpYWwgPSBudWxsKSB7XG4gIGlmICghU1VQUE9SVEVEX0xPQ0tfQ1JFREVOVElBTF9UWVBFUy5pbmNsdWRlcyhjcmVkZW50aWFsVHlwZSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYERldmljZSBsb2NrIGNyZWRlbnRpYWwgdHlwZSAnJHtjcmVkZW50aWFsVHlwZX0nIGlzIHVua25vd24uIGAgK1xuICAgICAgYE9ubHkgdGhlIGZvbGxvd2luZyBjcmVkZW50aWFsIHR5cGVzIGFyZSBzdXBwb3J0ZWQ6ICR7U1VQUE9SVEVEX0xPQ0tfQ1JFREVOVElBTF9UWVBFU31gKTtcbiAgfVxuICBpZiAoXy5pc0VtcHR5KGNyZWRlbnRpYWwpICYmICFfLmlzSW50ZWdlcihjcmVkZW50aWFsKSkge1xuICAgIHRocm93IG5ldyBFcnJvcignRGV2aWNlIGxvY2sgY3JlZGVudGlhbCBjYW5ub3QgYmUgZW1wdHknKTtcbiAgfVxuICBjb25zdCBjbWQgPSBidWlsZENvbW1hbmQoYHNldC0ke2NyZWRlbnRpYWxUeXBlfWAsIG9sZENyZWRlbnRpYWwsIGNyZWRlbnRpYWwpO1xuICB0cnkge1xuICAgIGNvbnN0IHtzdGRvdXQsIHN0ZGVycn0gPSBhd2FpdCB0aGlzLnNoZWxsKGNtZCwge1xuICAgICAgb3V0cHV0Rm9ybWF0OiB0aGlzLkVYRUNfT1VUUFVUX0ZPUk1BVC5GVUxMXG4gICAgfSk7XG4gICAgaWYgKCFfLmluY2x1ZGVzKHN0ZG91dCwgJ3NldCB0bycpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3Ioc3RkZXJyIHx8IHN0ZG91dCk7XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBTZXR0aW5nIG9mIGRldmljZSBsb2NrICR7Y3JlZGVudGlhbFR5cGV9IGNyZWRlbnRpYWwgZmFpbGVkLiBgICtcbiAgICAgIGBPcmlnaW5hbCBlcnJvcjogJHtlLnN0ZGVyciB8fCBlLnN0ZG91dCB8fCBlLm1lc3NhZ2V9YCk7XG4gIH1cbn07XG5cbi8qKlxuICogUmV0cmlldmUgdGhlIHNjcmVlbiBsb2NrIHN0YXRlIG9mIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBkZXZpY2UgaXMgbG9ja2VkLlxuICovXG5sb2NrTWFuYWdlbWVudE1ldGhvZHMuaXNTY3JlZW5Mb2NrZWQgPSBhc3luYyBmdW5jdGlvbiBpc1NjcmVlbkxvY2tlZCAoKSB7XG4gIGNvbnN0IHN0ZG91dCA9IGF3YWl0IHRoaXMuc2hlbGwoWydkdW1wc3lzJywgJ3dpbmRvdyddKTtcbiAgcmV0dXJuIGlzU2hvd2luZ0xvY2tzY3JlZW4oc3Rkb3V0KVxuICAgIHx8IGlzQ3VycmVudEZvY3VzT25LZXlndWFyZChzdGRvdXQpXG4gICAgfHwgIWlzU2NyZWVuT25GdWxseShzdGRvdXQpO1xufTtcblxuLyoqXG4gKiBEaXNtaXNzZXMga2V5Z3VhcmQgb3ZlcmxheS5cbiAqL1xubG9ja01hbmFnZW1lbnRNZXRob2RzLmRpc21pc3NLZXlndWFyZCA9IGFzeW5jIGZ1bmN0aW9uIGRpc21pc3NLZXlndWFyZCAoKSB7XG4gIGxvZy5pbmZvKCdXYWtpbmcgdXAgdGhlIGRldmljZSB0byBkaXNtaXNzIHRoZSBrZXlndWFyZCcpO1xuICAvLyBTY3JlZW4gb2ZmIG9uY2UgdG8gZm9yY2UgcHJlLWlucHV0dGVkIHRleHQgZmllbGQgY2xlYW4gYWZ0ZXIgd2FrZS11cFxuICAvLyBKdXN0IHNjcmVlbiBvbiBpZiB0aGUgc2NyZWVuIGRlZmF1bHRzIG9mZlxuICBhd2FpdCB0aGlzLmN5Y2xlV2FrZVVwKCk7XG5cbiAgaWYgKGF3YWl0IHRoaXMuZ2V0QXBpTGV2ZWwoKSA+IDIxKSB7XG4gICAgYXdhaXQgdGhpcy5zaGVsbChbJ3dtJywgJ2Rpc21pc3Mta2V5Z3VhcmQnXSk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3Qgc3Rkb3V0ID0gYXdhaXQgdGhpcy5zaGVsbChbJ2R1bXBzeXMnLCAnd2luZG93J10pO1xuICBpZiAoIWlzQ3VycmVudEZvY3VzT25LZXlndWFyZChzdGRvdXQpKSB7XG4gICAgbG9nLmRlYnVnKCdUaGUga2V5Z3VhcmQgc2VlbXMgdG8gYmUgaW5hY3RpdmUnKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBsb2cuZGVidWcoJ1N3aXBpbmcgdXAgdG8gZGlzbWlzcyB0aGUga2V5Z3VhcmQnKTtcbiAgaWYgKGF3YWl0IHRoaXMuaGlkZUtleWJvYXJkKCkpIHtcbiAgICBhd2FpdCBCLmRlbGF5KEhJREVfS0VZQk9BUkRfV0FJVF9USU1FKTtcbiAgfVxuICBsb2cuZGVidWcoJ0Rpc21pc3Npbmcgbm90aWZpY2F0aW9ucyBmcm9tIHRoZSB1bmxvY2sgdmlldycpO1xuICBhd2FpdCB0aGlzLnNoZWxsKFsnc2VydmljZScsICdjYWxsJywgJ25vdGlmaWNhdGlvbicsICcxJ10pO1xuICBhd2FpdCB0aGlzLmJhY2soKTtcbiAgYXdhaXQgc3dpcGVVcC5iaW5kKHRoaXMpKHN0ZG91dCk7XG59O1xuXG4vKipcbiAqIFByZXNzZXMgdGhlIGNvcnJlc3BvbmRpbmcga2V5IGNvbWJpbmF0aW9uIHRvIG1ha2Ugc3VyZSB0aGUgZGV2aWNlJ3Mgc2NyZWVuXG4gKiBpcyBub3QgdHVybmVkIG9mZiBhbmQgaXMgbG9ja2VkIGlmIHRoZSBsYXR0ZXIgaXMgZW5hYmxlZC5cbiAqL1xubG9ja01hbmFnZW1lbnRNZXRob2RzLmN5Y2xlV2FrZVVwID0gYXN5bmMgZnVuY3Rpb24gY3ljbGVXYWtlVXAgKCkge1xuICBhd2FpdCB0aGlzLmtleWV2ZW50KEtFWUNPREVfUE9XRVIpO1xuICBhd2FpdCB0aGlzLmtleWV2ZW50KEtFWUNPREVfV0FLRVVQKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGxvY2tNYW5hZ2VtZW50TWV0aG9kcztcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFHQTtBQUVBLE1BQU1BLHFCQUFxQixHQUFHLENBQUMsQ0FBQztBQUVoQyxNQUFNQyx3Q0FBd0MsR0FBSSxtQ0FBa0M7QUFDcEYsTUFBTUMsOEJBQThCLEdBQUksY0FBYTtBQUNyRCxNQUFNQywrQkFBK0IsR0FBRyxDQUFDLFVBQVUsRUFBRSxLQUFLLEVBQUUs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