"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
require("source-map-support/register");
var _logger = _interopRequireDefault(require("../logger.js"));
var _helpers = require("../helpers.js");
var _lodash = _interopRequireDefault(require("lodash"));
var _support = require("@appium/support");
var _asyncbox = require("asyncbox");
var _utf = require("utf7");
var _teen_process = require("teen_process");
var _bluebird = _interopRequireDefault(require("bluebird"));
const SETTINGS_HELPER_ID = 'io.appium.settings';
const SETTINGS_HELPER_MAIN_ACTIVITY = '.Settings';
const WIFI_CONNECTION_SETTING_RECEIVER = `${SETTINGS_HELPER_ID}/.receivers.WiFiConnectionSettingReceiver`;
const WIFI_CONNECTION_SETTING_ACTION = `${SETTINGS_HELPER_ID}.wifi`;
const DATA_CONNECTION_SETTING_RECEIVER = `${SETTINGS_HELPER_ID}/.receivers.DataConnectionSettingReceiver`;
const DATA_CONNECTION_SETTING_ACTION = `${SETTINGS_HELPER_ID}.data_connection`;
const ANIMATION_SETTING_RECEIVER = `${SETTINGS_HELPER_ID}/.receivers.AnimationSettingReceiver`;
const ANIMATION_SETTING_ACTION = `${SETTINGS_HELPER_ID}.animation`;
const LOCALE_SETTING_RECEIVER = `${SETTINGS_HELPER_ID}/.receivers.LocaleSettingReceiver`;
const LOCALE_SETTING_ACTION = `${SETTINGS_HELPER_ID}.locale`;
const LOCATION_SERVICE = `${SETTINGS_HELPER_ID}/.LocationService`;
const LOCATION_RECEIVER = `${SETTINGS_HELPER_ID}/.receivers.LocationInfoReceiver`;
const LOCATION_RETRIEVAL_ACTION = `${SETTINGS_HELPER_ID}.location`;
const CLIPBOARD_RECEIVER = `${SETTINGS_HELPER_ID}/.receivers.ClipboardReceiver`;
const CLIPBOARD_RETRIEVAL_ACTION = `${SETTINGS_HELPER_ID}.clipboard.get`;
const NOTIFICATIONS_RETRIEVAL_ACTION = `${SETTINGS_HELPER_ID}.notifications`;
const SMS_LIST_RECEIVER = `${SETTINGS_HELPER_ID}/.receivers.SmsReader`;
const SMS_LIST_RETRIEVAL_ACTION = `${SETTINGS_HELPER_ID}.sms.read`;
const MEDIA_SCAN_RECEIVER = `${SETTINGS_HELPER_ID}/.receivers.MediaScannerReceiver`;
const MEDIA_SCAN_ACTION = `${SETTINGS_HELPER_ID}.scan_media`;
const APPIUM_IME = `${SETTINGS_HELPER_ID}/.AppiumIME`;
const UNICODE_IME = `${SETTINGS_HELPER_ID}/.UnicodeIME`;
const DEFAULT_SATELLITES_COUNT = 12;
const DEFAULT_ALTITUDE = 0.0;
const LOCATION_TRACKER_TAG = 'LocationTracker';
const GPS_CACHE_REFRESHED_LOGS = ['The current location has been successfully retrieved from Play Services', 'The current location has been successfully retrieved from Location Manager'];
const GPS_COORDINATES_PATTERN = /data="(-?[\d.]+)\s+(-?[\d.]+)\s+(-?[\d.]+)"/;
const commands = {};
commands.requireRunningSettingsApp = async function requireRunningSettingsApp(opts = {}) {
  if (await this.processExists(SETTINGS_HELPER_ID)) {
    return this;
  }
  _logger.default.debug('Starting Appium Settings app');
  const {
    timeout = 5000,
    shouldRestoreCurrentApp = false
  } = opts;
  let appPackage;
  if (shouldRestoreCurrentApp) {
    try {
      ({
        appPackage
      } = await this.getFocusedPackageAndActivity());
    } catch (e) {
      _logger.default.warn(`The current application can not be restored: ${e.message}`);
    }
  }
  await this.startApp({
    pkg: SETTINGS_HELPER_ID,
    activity: SETTINGS_HELPER_MAIN_ACTIVITY,
    action: 'android.intent.action.MAIN',
    category: 'android.intent.category.LAUNCHER',
    stopApp: false,
    waitForLaunch: false
  });
  try {
    await (0, _asyncbox.waitForCondition)(async () => await this.processExists(SETTINGS_HELPER_ID), {
      waitMs: timeout,
      intervalMs: 300
    });
    if (shouldRestoreCurrentApp && appPackage) {
      try {
        await this.activateApp(appPackage);
      } catch (e) {
        _logger.default.warn(`The current application can not be restored: ${e.message}`);
      }
    }
    return this;
  } catch (err) {
    throw new Error(`Appium Settings app is not running after ${timeout}ms`);
  }
};
commands.setWifiState = async function setWifiState(on, isEmulator = false) {
  if (isEmulator) {
    await this.shell(['svc', 'wifi', on ? 'enable' : 'disable'], {
      privileged: (await this.getApiLevel()) < 26
    });
  } else {
    await this.requireRunningSettingsApp({
      shouldRestoreCurrentApp: true
    });
    await this.shell(['am', 'broadcast', '-a', WIFI_CONNECTION_SETTING_ACTION, '-n', WIFI_CONNECTION_SETTING_RECEIVER, '--es', 'setstatus', on ? 'enable' : 'disable']);
  }
};
commands.setDataState = async function setDataState(on, isEmulator = false) {
  if (isEmulator) {
    await this.shell(['svc', 'data', on ? 'enable' : 'disable'], {
      privileged: (await this.getApiLevel()) < 26
    });
  } else {
    await this.requireRunningSettingsApp({
      shouldRestoreCurrentApp: true
    });
    await this.shell(['am', 'broadcast', '-a', DATA_CONNECTION_SETTING_ACTION, '-n', DATA_CONNECTION_SETTING_RECEIVER, '--es', 'setstatus', on ? 'enable' : 'disable']);
  }
};
commands.setAnimationState = async function setAnimationState(on) {
  await this.shell(['am', 'broadcast', '-a', ANIMATION_SETTING_ACTION, '-n', ANIMATION_SETTING_RECEIVER, '--es', 'setstatus', on ? 'enable' : 'disable']);
};
commands.setDeviceSysLocaleViaSettingApp = async function setDeviceSysLocaleViaSettingApp(language, country, script = null) {
  const params = ['am', 'broadcast', '-a', LOCALE_SETTING_ACTION, '-n', LOCALE_SETTING_RECEIVER, '--es', 'lang', language.toLowerCase(), '--es', 'country', country.toUpperCase()];
  if (script) {
    params.push('--es', 'script', script);
  }
  await this.shell(params);
};
commands.setGeoLocation = async function setGeoLocation(location, isEmulator = false) {
  const formatLocationValue = (valueName, isRequired = true) => {
    if (!_support.util.hasValue(location[valueName])) {
      if (isRequired) {
        throw new Error(`${valueName} must be provided`);
      }
      return null;
    }
    const floatValue = parseFloat(location[valueName]);
    if (!isNaN(floatValue)) {
      return `${_lodash.default.ceil(floatValue, 5)}`;
    }
    if (isRequired) {
      throw new Error(`${valueName} is expected to be a valid float number. ` + `'${location[valueName]}' is given instead`);
    }
    return null;
  };
  const longitude = formatLocationValue('longitude');
  const latitude = formatLocationValue('latitude');
  const altitude = formatLocationValue('altitude', false);
  const speed = formatLocationValue('speed', false);
  if (isEmulator) {
    const args = [longitude, latitude];
    if (!_lodash.default.isNil(altitude)) {
      args.push(altitude);
    }
    const satellites = parseInt(location.satellites, 10);
    if (!Number.isNaN(satellites) && satellites > 0 && satellites <= 12) {
      if (args.length < 3) {
        args.push(`${DEFAULT_ALTITUDE}`);
      }
      args.push(`${satellites}`);
    }
    if (!_lodash.default.isNil(speed)) {
      if (args.length < 3) {
        args.push(`${DEFAULT_ALTITUDE}`);
      }
      if (args.length < 4) {
        args.push(`${DEFAULT_SATELLITES_COUNT}`);
      }
      args.push(speed);
    }
    await this.resetTelnetAuthToken();
    await this.adbExec(['emu', 'geo', 'fix', ...args]);
    await this.adbExec(['emu', 'geo', 'fix', ...args.map(arg => arg.replace('.', ','))]);
  } else {
    const args = ['am', (await this.getApiLevel()) >= 26 ? 'start-foreground-service' : 'startservice', '-e', 'longitude', longitude, '-e', 'latitude', latitude];
    if (_support.util.hasValue(altitude)) {
      args.push('-e', 'altitude', altitude);
    }
    if (_support.util.hasValue(speed)) {
      args.push('-e', 'speed', speed);
    }
    args.push(LOCATION_SERVICE);
    await this.shell(args);
  }
};
commands.getGeoLocation = async function getGeoLocation() {
  await this.requireRunningSettingsApp({
    shouldRestoreCurrentApp: true
  });
  let output;
  try {
    output = await this.shell(['am', 'broadcast', '-n', LOCATION_RECEIVER, '-a', LOCATION_RETRIEVAL_ACTION]);
  } catch (err) {
    throw new Error(`Cannot retrieve the current geo coordinates from the device. ` + `Make sure the Appium Settings application is up to date and has location permissions. Also the location ` + `services must be enabled on the device. Original error: ${err.stderr || err.stdout || err.message}`);
  }
  const match = GPS_COORDINATES_PATTERN.exec(output);
  if (!match) {
    throw new Error(`Cannot parse the actual location values from the command output: ${output}`);
  }
  const location = {
    latitude: match[1],
    longitude: match[2],
    altitude: match[3]
  };
  _logger.default.debug(`Got geo coordinates: ${JSON.stringify(location)}`);
  return location;
};
commands.refreshGeoLocationCache = async function refreshGeoLocationCache(timeoutMs = 20000) {
  await this.requireRunningSettingsApp({
    shouldRestoreCurrentApp: true
  });
  let logcatMonitor;
  let monitoringPromise;
  if (timeoutMs > 0) {
    const cmd = [...this.executable.defaultArgs, 'logcat', '-s', LOCATION_TRACKER_TAG];
    logcatMonitor = new _teen_process.SubProcess(this.executable.path, cmd);
    const timeoutErrorMsg = `The GPS cache has not been refreshed within ${timeoutMs}ms timeout. ` + `Please make sure the device under test has Appium Settings app installed and running. ` + `Also, it is required that the device has Google Play Services installed or is running ` + `Android 10+ otherwise.`;
    monitoringPromise = new _bluebird.default((resolve, reject) => {
      setTimeout(() => reject(new Error(timeoutErrorMsg)), timeoutMs);
      logcatMonitor.on('exit', () => reject(new Error(timeoutErrorMsg)));
      ['lines-stderr', 'lines-stdout'].map(evt => logcatMonitor.on(evt, lines => {
        if (lines.some(line => GPS_CACHE_REFRESHED_LOGS.some(x => line.includes(x)))) {
          resolve();
        }
      }));
    });
    await logcatMonitor.start(0);
  }
  try {
    await this.shell(['am', 'broadcast', '-n', LOCATION_RECEIVER, '-a', LOCATION_RETRIEVAL_ACTION, '--ez', 'forceUpdate', 'true']);
  } catch (err) {
    throw new Error(`Cannot refresh the GPS cache on the device. ` + `Make sure the Appium Settings application is up to date and has location permissions. Also the location ` + `services must be enabled on the device. Original error: ${err.stderr || err.stdout || err.message}`);
  }
  if (logcatMonitor && monitoringPromise) {
    const timer = new _support.timing.Timer().start();
    _logger.default.debug(`Waiting up to ${timeoutMs}ms for the GPS cache to be refreshed`);
    try {
      await monitoringPromise;
      _logger.default.info(`The GPS cache has been successfully refreshed after ` + `${timer.getDuration().asMilliSeconds.toFixed(0)}ms`);
    } finally {
      if (logcatMonitor.isRunning) {
        await logcatMonitor.stop();
      }
    }
  } else {
    _logger.default.info('The request to refresh the GPS cache has been sent. Skipping waiting for its result.');
  }
};
commands.performEditorAction = async function performEditorAction(action) {
  _logger.default.debug(`Performing editor action: ${action}`);
  await this.runInImeContext(APPIUM_IME, async () => await this.shell(['input', 'text', `/${action}/`]));
};
commands.getClipboard = async function getClipboard() {
  _logger.default.debug('Getting the clipboard content');
  await this.requireRunningSettingsApp({
    shouldRestoreCurrentApp: true
  });
  const retrieveClipboard = async () => await this.shell(['am', 'broadcast', '-n', CLIPBOARD_RECEIVER, '-a', CLIPBOARD_RETRIEVAL_ACTION]);
  let output;
  try {
    output = (await this.getApiLevel()) >= 29 ? await this.runInImeContext(APPIUM_IME, retrieveClipboard) : await retrieveClipboard();
  } catch (err) {
    throw new Error(`Cannot retrieve the current clipboard content from the device. ` + `Make sure the Appium Settings application is up to date. ` + `Original error: ${err.message}`);
  }
  const match = /data="([^"]*)"/.exec(output);
  if (!match) {
    throw new Error(`Cannot parse the actual cliboard content from the command output: ${output}`);
  }
  return _lodash.default.trim(match[1]);
};
commands.getNotifications = async function getNotifications() {
  _logger.default.debug('Retrieving notifications');
  await this.requireRunningSettingsApp({
    shouldRestoreCurrentApp: true
  });
  let output;
  try {
    output = await this.shell(['am', 'broadcast', '-a', NOTIFICATIONS_RETRIEVAL_ACTION]);
  } catch (err) {
    throw new Error(`Cannot retrieve notifications from the device. ` + `Make sure the Appium Settings application is installed and is up to date. ` + `Original error: ${err.message}`);
  }
  return (0, _helpers.parseJsonData)(output, 'notifications');
};
commands.getSmsList = async function getSmsList(opts = {}) {
  _logger.default.debug('Retrieving the recent SMS messages');
  await this.requireRunningSettingsApp({
    shouldRestoreCurrentApp: true
  });
  const args = ['am', 'broadcast', '-n', SMS_LIST_RECEIVER, '-a', SMS_LIST_RETRIEVAL_ACTION];
  if (opts.max) {
    args.push('--es', 'max', opts.max);
  }
  let output;
  try {
    output = await this.shell(args);
  } catch (err) {
    throw new Error(`Cannot retrieve SMS list from the device. ` + `Make sure the Appium Settings application is installed and is up to date. ` + `Original error: ${err.message}`);
  }
  return (0, _helpers.parseJsonData)(output, 'SMS list');
};
commands.typeUnicode = async function typeUnicode(text) {
  if (_lodash.default.isNil(text)) {
    return false;
  }
  text = `${text}`;
  _logger.default.debug(`Typing ${_support.util.pluralize('character', text.length, true)}`);
  if (!text) {
    return false;
  }
  await this.runInImeContext(UNICODE_IME, async () => await this.inputText(_utf.imap.encode(text)));
  return true;
};
commands.scanMedia = async function scanMedia(destination) {
  _logger.default.debug(`Scanning '${destination}' for media files`);
  await this.requireRunningSettingsApp({
    shouldRestoreCurrentApp: true
  });
  const output = await this.shell(['am', 'broadcast', '-n', MEDIA_SCAN_RECEIVER, '-a', MEDIA_SCAN_ACTION, '--es', 'path', destination]);
  if (!_lodash.default.includes(output, 'result=-1')) {
    throw new Error(`No media could be scanned at '${destination}'. ` + `Check the device logcat output for more details.`);
  }
};
var _default = commands;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTRVRUSU5HU19IRUxQRVJfSUQiLCJTRVRUSU5HU19IRUxQRVJfTUFJTl9BQ1RJVklUWSIsIldJRklfQ09OTkVDVElPTl9TRVRUSU5HX1JFQ0VJVkVSIiwiV0lGSV9DT05ORUNUSU9OX1NFVFRJTkdfQUNUSU9OIiwiREFUQV9DT05ORUNUSU9OX1NFVFRJTkdfUkVDRUlWRVIiLCJEQVRBX0NPTk5FQ1RJT05fU0VUVElOR19BQ1RJT04iLCJBTklNQVRJT05fU0VUVElOR19SRUNFSVZFUiIsIkFOSU1BVElPTl9TRVRUSU5HX0FDVElPTiIsIkxPQ0FMRV9TRVRUSU5HX1JFQ0VJVkVSIiwiTE9DQUxFX1NFVFRJTkdfQUNUSU9OIiwiTE9DQVRJT05fU0VSVklDRSIsIkxPQ0FUSU9OX1JFQ0VJVkVSIiwiTE9DQVRJT05fUkVUUklFVkFMX0FDVElPTiIsIkNMSVBCT0FSRF9SRUNFSVZFUiIsIkNMSVBCT0FSRF9SRVRSSUVWQUxfQUNUSU9OIiwiTk9USUZJQ0FUSU9OU19SRVRSSUVWQUxfQUNUSU9OIiwiU01TX0xJU1RfUkVDRUlWRVIiLCJTTVNfTElTVF9SRVRSSUVWQUxfQUNUSU9OIiwiTUVESUFfU0NBTl9SRUNFSVZFUiIsIk1FRElBX1NDQU5fQUNUSU9OIiwiQVBQSVVNX0lNRSIsIlVOSUNPREVfSU1FIiwiREVGQVVMVF9TQVRFTExJVEVTX0NPVU5UIiwiREVGQVVMVF9BTFRJVFVERSIsIkxPQ0FUSU9OX1RSQUNLRVJfVEFHIiwiR1BTX0NBQ0hFX1JFRlJFU0hFRF9MT0dTIiwiR1BTX0NPT1JESU5BVEVTX1BBVFRFUk4iLCJjb21tYW5kcyIsInJlcXVpcmVSdW5uaW5nU2V0dGluZ3NBcHAiLCJvcHRzIiwicHJvY2Vzc0V4aXN0cyIsImxvZyIsImRlYnVnIiwidGltZW91dCIsInNob3VsZFJlc3RvcmVDdXJyZW50QXBwIiwiYXBwUGFja2FnZSIsImdldEZvY3VzZWRQYWNrYWdlQW5kQWN0aXZpdHkiLCJlIiwid2FybiIsIm1lc3NhZ2UiLCJzdGFydEFwcCIsInBrZyIsImFjdGl2aXR5IiwiYWN0aW9uIiwiY2F0ZWdvcnkiLCJzdG9wQXBwIiwid2FpdEZvckxhdW5jaCIsIndhaXRGb3JDb25kaXRpb24iLCJ3YWl0TXMiLCJpbnRlcnZhbE1zIiwiYWN0aXZhdGVBcHAiLCJlcnIiLCJFcnJvciIsInNldFdpZmlTdGF0ZSIsIm9uIiwiaXNFbXVsYXRvciIsInNoZWxsIiwicHJpdmlsZWdlZCIsImdldEFwaUxldmVsIiwic2V0RGF0YVN0YXRlIiwic2V0QW5pbWF0aW9uU3RhdGUiLCJzZXREZXZpY2VTeXNMb2NhbGVWaWFTZXR0aW5nQXBwIiwibGFuZ3VhZ2UiLCJjb3VudHJ5Iiwic2NyaXB0IiwicGFyYW1zIiwidG9Mb3dlckNhc2UiLCJ0b1VwcGVyQ2FzZSIsInB1c2giLCJzZXRHZW9Mb2NhdGlvbiIsImxvY2F0aW9uIiwiZm9ybWF0TG9jYXRpb25WYWx1ZSIsInZhbHVlTmFtZSIsImlzUmVxdWlyZWQiLCJ1dGlsIiwiaGFzVmFsdWUiLCJmbG9hdFZhbHVlIiwicGFyc2VGbG9hdCIsImlzTmFOIiwiXyIsImNlaWwiLCJsb25naXR1ZGUiLCJsYXRpdHVkZSIsImFsdGl0dWRlIiwic3BlZWQiLCJhcmdzIiwiaXNOaWwiLCJzYXRlbGxpdGVzIiwicGFyc2VJbnQiLCJOdW1iZXIiLCJsZW5ndGgiLCJyZXNldFRlbG5ldEF1dGhUb2tlbiIsImFkYkV4ZWMiLCJtYXAiLCJhcmciLCJyZXBsYWNlIiwiZ2V0R2VvTG9jYXRpb24iLCJvdXRwdXQiLCJzdGRlcnIiLCJzdGRvdXQiLCJtYXRjaCIsImV4ZWMiLCJKU09OIiwic3RyaW5naWZ5IiwicmVmcmVzaEdlb0xvY2F0aW9uQ2FjaGUiLCJ0aW1lb3V0TXMiLCJsb2djYXRNb25pdG9yIiwibW9uaXRvcmluZ1Byb21pc2UiLCJjbWQiLCJleGVjdXRhYmxlIiwiZGVmYXVsdEFyZ3MiLCJTdWJQcm9jZXNzIiwicGF0aCIsInRpbWVvdXRFcnJvck1zZyIsIkIiLCJyZXNvbHZlIiwicmVqZWN0Iiwic2V0VGltZW91dCIsImV2dCIsImxpbmVzIiwic29tZSIsImxpbmUiLCJ4IiwiaW5jbHVkZXMiLCJzdGFydCIsInRpbWVyIiwidGltaW5nIiwiVGltZXIiLCJpbmZvIiwiZ2V0RHVyYXRpb24iLCJhc01pbGxpU2Vjb25kcyIsInRvRml4ZWQiLCJpc1J1bm5pbmciLCJzdG9wIiwicGVyZm9ybUVkaXRvckFjdGlvbiIsInJ1bkluSW1lQ29udGV4dCIsImdldENsaXBib2FyZCIsInJldHJpZXZlQ2xpcGJvYXJkIiwidHJpbSIsImdldE5vdGlmaWNhdGlvbnMiLCJwYXJzZUpzb25EYXRhIiwiZ2V0U21zTGlzdCIsIm1heCIsInR5cGVVbmljb2RlIiwidGV4dCIsInBsdXJhbGl6ZSIsImlucHV0VGV4dCIsImltYXAiLCJlbmNvZGUiLCJzY2FuTWVkaWEiLCJkZXN0aW5hdGlvbiJdLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xpYi90b29scy9zZXR0aW5ncy1jbGllbnQtY29tbWFuZHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGxvZyBmcm9tICcuLi9sb2dnZXIuanMnO1xuaW1wb3J0IHsgcGFyc2VKc29uRGF0YSB9IGZyb20gJy4uL2hlbHBlcnMuanMnO1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IHV0aWwsIHRpbWluZyB9IGZyb20gJ0BhcHBpdW0vc3VwcG9ydCc7XG5pbXBvcnQgeyB3YWl0Rm9yQ29uZGl0aW9uIH0gZnJvbSAnYXN5bmNib3gnO1xuaW1wb3J0IHsgaW1hcCB9IGZyb20gJ3V0ZjcnO1xuaW1wb3J0IHsgU3ViUHJvY2VzcyB9IGZyb20gJ3RlZW5fcHJvY2Vzcyc7XG5pbXBvcnQgQiBmcm9tICdibHVlYmlyZCc7XG5cbmNvbnN0IFNFVFRJTkdTX0hFTFBFUl9JRCA9ICdpby5hcHBpdW0uc2V0dGluZ3MnO1xuY29uc3QgU0VUVElOR1NfSEVMUEVSX01BSU5fQUNUSVZJVFkgPSAnLlNldHRpbmdzJztcbmNvbnN0IFdJRklfQ09OTkVDVElPTl9TRVRUSU5HX1JFQ0VJVkVSID0gYCR7U0VUVElOR1NfSEVMUEVSX0lEfS8ucmVjZWl2ZXJzLldpRmlDb25uZWN0aW9uU2V0dGluZ1JlY2VpdmVyYDtcbmNvbnN0IFdJRklfQ09OTkVDVElPTl9TRVRUSU5HX0FDVElPTiA9IGAke1NFVFRJTkdTX0hFTFBFUl9JRH0ud2lmaWA7XG5jb25zdCBEQVRBX0NPTk5FQ1RJT05fU0VUVElOR19SRUNFSVZFUiA9IGAke1NFVFRJTkdTX0hFTFBFUl9JRH0vLnJlY2VpdmVycy5EYXRhQ29ubmVjdGlvblNldHRpbmdSZWNlaXZlcmA7XG5jb25zdCBEQVRBX0NPTk5FQ1RJT05fU0VUVElOR19BQ1RJT04gPSBgJHtTRVRUSU5HU19IRUxQRVJfSUR9LmRhdGFfY29ubmVjdGlvbmA7XG5jb25zdCBBTklNQVRJT05fU0VUVElOR19SRUNFSVZFUiA9IGAke1NFVFRJTkdTX0hFTFBFUl9JRH0vLnJlY2VpdmVycy5BbmltYXRpb25TZXR0aW5nUmVjZWl2ZXJgO1xuY29uc3QgQU5JTUFUSU9OX1NFVFRJTkdfQUNUSU9OID0gYCR7U0VUVElOR1NfSEVMUEVSX0lEfS5hbmltYXRpb25gO1xuY29uc3QgTE9DQUxFX1NFVFRJTkdfUkVDRUlWRVIgPSBgJHtTRVRUSU5HU19IRUxQRVJfSUR9Ly5yZWNlaXZlcnMuTG9jYWxlU2V0dGluZ1JlY2VpdmVyYDtcbmNvbnN0IExPQ0FMRV9TRVRUSU5HX0FDVElPTiA9IGAke1NFVFRJTkdTX0hFTFBFUl9JRH0ubG9jYWxlYDtcbmNvbnN0IExPQ0FUSU9OX1NFUlZJQ0UgPSBgJHtTRVRUSU5HU19IRUxQRVJfSUR9Ly5Mb2NhdGlvblNlcnZpY2VgO1xuY29uc3QgTE9DQVRJT05fUkVDRUlWRVIgPSBgJHtTRVRUSU5HU19IRUxQRVJfSUR9Ly5yZWNlaXZlcnMuTG9jYXRpb25JbmZvUmVjZWl2ZXJgO1xuY29uc3QgTE9DQVRJT05fUkVUUklFVkFMX0FDVElPTiA9IGAke1NFVFRJTkdTX0hFTFBFUl9JRH0ubG9jYXRpb25gO1xuY29uc3QgQ0xJUEJPQVJEX1JFQ0VJVkVSID0gYCR7U0VUVElOR1NfSEVMUEVSX0lEfS8ucmVjZWl2ZXJzLkNsaXBib2FyZFJlY2VpdmVyYDtcbmNvbnN0IENMSVBCT0FSRF9SRVRSSUVWQUxfQUNUSU9OID0gYCR7U0VUVElOR1NfSEVMUEVSX0lEfS5jbGlwYm9hcmQuZ2V0YDtcbmNvbnN0IE5PVElGSUNBVElPTlNfUkVUUklFVkFMX0FDVElPTiA9IGAke1NFVFRJTkdTX0hFTFBFUl9JRH0ubm90aWZpY2F0aW9uc2A7XG5jb25zdCBTTVNfTElTVF9SRUNFSVZFUiA9IGAke1NFVFRJTkdTX0hFTFBFUl9JRH0vLnJlY2VpdmVycy5TbXNSZWFkZXJgO1xuY29uc3QgU01TX0xJU1RfUkVUUklFVkFMX0FDVElPTiA9IGAke1NFVFRJTkdTX0hFTFBFUl9JRH0uc21zLnJlYWRgO1xuY29uc3QgTUVESUFfU0NBTl9SRUNFSVZFUiA9IGAke1NFVFRJTkdTX0hFTFBFUl9JRH0vLnJlY2VpdmVycy5NZWRpYVNjYW5uZXJSZWNlaXZlcmA7XG5jb25zdCBNRURJQV9TQ0FOX0FDVElPTiA9IGAke1NFVFRJTkdTX0hFTFBFUl9JRH0uc2Nhbl9tZWRpYWA7XG5jb25zdCBBUFBJVU1fSU1FID0gYCR7U0VUVElOR1NfSEVMUEVSX0lEfS8uQXBwaXVtSU1FYDtcbmNvbnN0IFVOSUNPREVfSU1FID0gYCR7U0VUVElOR1NfSEVMUEVSX0lEfS8uVW5pY29kZUlNRWA7XG5jb25zdCBERUZBVUxUX1NBVEVMTElURVNfQ09VTlQgPSAxMjtcbmNvbnN0IERFRkFVTFRfQUxUSVRVREUgPSAwLjA7XG5jb25zdCBMT0NBVElPTl9UUkFDS0VSX1RBRyA9ICdMb2NhdGlvblRyYWNrZXInO1xuY29uc3QgR1BTX0NBQ0hFX1JFRlJFU0hFRF9MT0dTID0gW1xuICAnVGhlIGN1cnJlbnQgbG9jYXRpb24gaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IHJldHJpZXZlZCBmcm9tIFBsYXkgU2VydmljZXMnLFxuICAnVGhlIGN1cnJlbnQgbG9jYXRpb24gaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IHJldHJpZXZlZCBmcm9tIExvY2F0aW9uIE1hbmFnZXInXG5dO1xuXG5jb25zdCBHUFNfQ09PUkRJTkFURVNfUEFUVEVSTiA9IC9kYXRhPVwiKC0/W1xcZC5dKylcXHMrKC0/W1xcZC5dKylcXHMrKC0/W1xcZC5dKylcIi87XG5cbmNvbnN0IGNvbW1hbmRzID0ge307XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gU2V0dGluZ3NBcHBTdGFydHVwT3B0aW9uc1xuICogQHByb3BlcnR5IHtudW1iZXJ9IHRpbWVvdXQgWzUwMDBdIFRoZSBtYXhpbXVtIG51bWJlciBvZiBtaWxsaXNlY29uZHNcbiAqIHRvIHdhaXQgdW50aWwgdGhlIGFwcCBoYXMgc3RhcnRlZFxuICogQHByb3BlcnR5IHtib29sZWFufSBzaG91bGRSZXN0b3JlQ3VycmVudEFwcCBbZmFsc2VdIFdoZXRoZXIgdG8gcmVzdG9yZVxuICogdGhlIGFjdGl2aXR5IHdoaWNoIHdhcyB0aGUgY3VycmVudCBvbmUgYmVmb3JlIFNldHRpbmdzIHN0YXJ0dXBcbiAqL1xuXG4vKipcbiAqIEVuc3VyZXMgdGhhdCBBcHBpdW0gU2V0dGluZ3MgaGVscGVyIGFwcGxpY2F0aW9uIGlzIHJ1bm5pbmdcbiAqIGFuZCBzdGFydHMgaXQgaWYgbmVjZXNzYXJ5XG4gKlxuICogQHBhcmFtIHtTZXR0aW5nc0FwcFN0YXJ0dXBPcHRpb25zfSBvcHRzXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgQXBwaXVtIFNldHRpbmdzIGhhcyBmYWlsZWQgdG8gc3RhcnRcbiAqIEByZXR1cm5zIHtBREJ9IHNlbGYgaW5zdGFuY2UgZm9yIGNoYWluaW5nXG4gKi9cbmNvbW1hbmRzLnJlcXVpcmVSdW5uaW5nU2V0dGluZ3NBcHAgPSBhc3luYyBmdW5jdGlvbiByZXF1aXJlUnVubmluZ1NldHRpbmdzQXBwIChvcHRzID0ge30pIHtcbiAgaWYgKGF3YWl0IHRoaXMucHJvY2Vzc0V4aXN0cyhTRVRUSU5HU19IRUxQRVJfSUQpKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBsb2cuZGVidWcoJ1N0YXJ0aW5nIEFwcGl1bSBTZXR0aW5ncyBhcHAnKTtcbiAgY29uc3Qge1xuICAgIHRpbWVvdXQgPSA1MDAwLFxuICAgIHNob3VsZFJlc3RvcmVDdXJyZW50QXBwID0gZmFsc2UsXG4gIH0gPSBvcHRzO1xuICBsZXQgYXBwUGFja2FnZTtcbiAgaWYgKHNob3VsZFJlc3RvcmVDdXJyZW50QXBwKSB7XG4gICAgdHJ5IHtcbiAgICAgICh7YXBwUGFja2FnZX0gPSBhd2FpdCB0aGlzLmdldEZvY3VzZWRQYWNrYWdlQW5kQWN0aXZpdHkoKSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgbG9nLndhcm4oYFRoZSBjdXJyZW50IGFwcGxpY2F0aW9uIGNhbiBub3QgYmUgcmVzdG9yZWQ6ICR7ZS5tZXNzYWdlfWApO1xuICAgIH1cbiAgfVxuICBhd2FpdCB0aGlzLnN0YXJ0QXBwKHtcbiAgICBwa2c6IFNFVFRJTkdTX0hFTFBFUl9JRCxcbiAgICBhY3Rpdml0eTogU0VUVElOR1NfSEVMUEVSX01BSU5fQUNUSVZJVFksXG4gICAgYWN0aW9uOiAnYW5kcm9pZC5pbnRlbnQuYWN0aW9uLk1BSU4nLFxuICAgIGNhdGVnb3J5OiAnYW5kcm9pZC5pbnRlbnQuY2F0ZWdvcnkuTEFVTkNIRVInLFxuICAgIHN0b3BBcHA6IGZhbHNlLFxuICAgIHdhaXRGb3JMYXVuY2g6IGZhbHNlLFxuICB9KTtcbiAgdHJ5IHtcbiAgICBhd2FpdCB3YWl0Rm9yQ29uZGl0aW9uKGFzeW5jICgpID0+IGF3YWl0IHRoaXMucHJvY2Vzc0V4aXN0cyhTRVRUSU5HU19IRUxQRVJfSUQpLCB7XG4gICAgICB3YWl0TXM6IHRpbWVvdXQsXG4gICAgICBpbnRlcnZhbE1zOiAzMDAsXG4gICAgfSk7XG4gICAgaWYgKHNob3VsZFJlc3RvcmVDdXJyZW50QXBwICYmIGFwcFBhY2thZ2UpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYWN0aXZhdGVBcHAoYXBwUGFja2FnZSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGxvZy53YXJuKGBUaGUgY3VycmVudCBhcHBsaWNhdGlvbiBjYW4gbm90IGJlIHJlc3RvcmVkOiAke2UubWVzc2FnZX1gKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHRocm93IG5ldyBFcnJvcihgQXBwaXVtIFNldHRpbmdzIGFwcCBpcyBub3QgcnVubmluZyBhZnRlciAke3RpbWVvdXR9bXNgKTtcbiAgfVxufTtcblxuLyoqXG4gKiBDaGFuZ2UgdGhlIHN0YXRlIG9mIFdpRmkgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gb24gLSBUcnVlIHRvIGVuYWJsZSBhbmQgZmFsc2UgdG8gZGlzYWJsZSBpdC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNFbXVsYXRvciBbZmFsc2VdIC0gU2V0IGl0IHRvIHRydWUgaWYgdGhlIGRldmljZSB1bmRlciB0ZXN0XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzIGFuIGVtdWxhdG9yIHJhdGhlciB0aGFuIGEgcmVhbCBkZXZpY2UuXG4gKi9cbmNvbW1hbmRzLnNldFdpZmlTdGF0ZSA9IGFzeW5jIGZ1bmN0aW9uIHNldFdpZmlTdGF0ZSAob24sIGlzRW11bGF0b3IgPSBmYWxzZSkge1xuICBpZiAoaXNFbXVsYXRvcikge1xuICAgIC8vIFRoZSBzdmMgY29tbWFuZCBkb2VzIG5vdCByZXF1aXJlIHRvIGJlIHJvb3Qgc2luY2UgQVBJIDI2XG4gICAgYXdhaXQgdGhpcy5zaGVsbChbJ3N2YycsICd3aWZpJywgb24gPyAnZW5hYmxlJyA6ICdkaXNhYmxlJ10sIHtcbiAgICAgIHByaXZpbGVnZWQ6IGF3YWl0IHRoaXMuZ2V0QXBpTGV2ZWwoKSA8IDI2LFxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIGF3YWl0IHRoaXMucmVxdWlyZVJ1bm5pbmdTZXR0aW5nc0FwcCh7c2hvdWxkUmVzdG9yZUN1cnJlbnRBcHA6IHRydWV9KTtcblxuICAgIGF3YWl0IHRoaXMuc2hlbGwoW1xuICAgICAgJ2FtJywgJ2Jyb2FkY2FzdCcsXG4gICAgICAnLWEnLCBXSUZJX0NPTk5FQ1RJT05fU0VUVElOR19BQ1RJT04sXG4gICAgICAnLW4nLCBXSUZJX0NPTk5FQ1RJT05fU0VUVElOR19SRUNFSVZFUixcbiAgICAgICctLWVzJywgJ3NldHN0YXR1cycsIG9uID8gJ2VuYWJsZScgOiAnZGlzYWJsZSdcbiAgICBdKTtcbiAgfVxufTtcblxuLyoqXG4gKiBDaGFuZ2UgdGhlIHN0YXRlIG9mIERhdGEgdHJhbnNmZXIgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gb24gLSBUcnVlIHRvIGVuYWJsZSBhbmQgZmFsc2UgdG8gZGlzYWJsZSBpdC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNFbXVsYXRvciBbZmFsc2VdIC0gU2V0IGl0IHRvIHRydWUgaWYgdGhlIGRldmljZSB1bmRlciB0ZXN0XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzIGFuIGVtdWxhdG9yIHJhdGhlciB0aGFuIGEgcmVhbCBkZXZpY2UuXG4gKi9cbmNvbW1hbmRzLnNldERhdGFTdGF0ZSA9IGFzeW5jIGZ1bmN0aW9uIHNldERhdGFTdGF0ZSAob24sIGlzRW11bGF0b3IgPSBmYWxzZSkge1xuICBpZiAoaXNFbXVsYXRvcikge1xuICAgIC8vIFRoZSBzdmMgY29tbWFuZCBkb2VzIG5vdCByZXF1aXJlIHRvIGJlIHJvb3Qgc2luY2UgQVBJIDI2XG4gICAgYXdhaXQgdGhpcy5zaGVsbChbJ3N2YycsICdkYXRhJywgb24gPyAnZW5hYmxlJyA6ICdkaXNhYmxlJ10sIHtcbiAgICAgIHByaXZpbGVnZWQ6IGF3YWl0IHRoaXMuZ2V0QXBpTGV2ZWwoKSA8IDI2LFxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIGF3YWl0IHRoaXMucmVxdWlyZVJ1bm5pbmdTZXR0aW5nc0FwcCh7c2hvdWxkUmVzdG9yZUN1cnJlbnRBcHA6IHRydWV9KTtcblxuICAgIGF3YWl0IHRoaXMuc2hlbGwoW1xuICAgICAgJ2FtJywgJ2Jyb2FkY2FzdCcsXG4gICAgICAnLWEnLCBEQVRBX0NPTk5FQ1RJT05fU0VUVElOR19BQ1RJT04sXG4gICAgICAnLW4nLCBEQVRBX0NPTk5FQ1RJT05fU0VUVElOR19SRUNFSVZFUixcbiAgICAgICctLWVzJywgJ3NldHN0YXR1cycsIG9uID8gJ2VuYWJsZScgOiAnZGlzYWJsZSdcbiAgICBdKTtcbiAgfVxufTtcblxuLyoqXG4gKiBDaGFuZ2UgdGhlIHN0YXRlIG9mIGFuaW1hdGlvbiBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKiBBbmltYXRpb24gb24gdGhlIGRldmljZSBpcyBjb250cm9sbGVkIGJ5IHRoZSBmb2xsb3dpbmcgZ2xvYmFsIHByb3BlcnRpZXM6XG4gKiBbQU5JTUFUT1JfRFVSQVRJT05fU0NBTEVde0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLmFuZHJvaWQuY29tL3JlZmVyZW5jZS9hbmRyb2lkL3Byb3ZpZGVyL1NldHRpbmdzLkdsb2JhbC5odG1sI0FOSU1BVE9SX0RVUkFUSU9OX1NDQUxFfSxcbiAqIFtUUkFOU0lUSU9OX0FOSU1BVElPTl9TQ0FMRV17QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIuYW5kcm9pZC5jb20vcmVmZXJlbmNlL2FuZHJvaWQvcHJvdmlkZXIvU2V0dGluZ3MuR2xvYmFsLmh0bWwjVFJBTlNJVElPTl9BTklNQVRJT05fU0NBTEV9LFxuICogW1dJTkRPV19BTklNQVRJT05fU0NBTEVde0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLmFuZHJvaWQuY29tL3JlZmVyZW5jZS9hbmRyb2lkL3Byb3ZpZGVyL1NldHRpbmdzLkdsb2JhbC5odG1sI1dJTkRPV19BTklNQVRJT05fU0NBTEV9LlxuICogVGhpcyBtZXRob2Qgc2V0cyBhbGwgdGhpcyBwcm9wZXJ0aWVzIHRvIDAuMCB0byBkaXNhYmxlICgxLjAgdG8gZW5hYmxlKSBhbmltYXRpb24uXG4gKlxuICogVHVybmluZyBvZmYgYW5pbWF0aW9uIG1pZ2h0IGJlIHVzZWZ1bCB0byBpbXByb3ZlIHN0YWJpbGl0eVxuICogYW5kIHJlZHVjZSB0ZXN0cyBleGVjdXRpb24gdGltZS5cbiAqXG4gKiBAcGFyYW0ge2Jvb2xlYW59IG9uIC0gVHJ1ZSB0byBlbmFibGUgYW5kIGZhbHNlIHRvIGRpc2FibGUgaXQuXG4gKi9cbmNvbW1hbmRzLnNldEFuaW1hdGlvblN0YXRlID0gYXN5bmMgZnVuY3Rpb24gc2V0QW5pbWF0aW9uU3RhdGUgKG9uKSB7XG4gIGF3YWl0IHRoaXMuc2hlbGwoW1xuICAgICdhbScsICdicm9hZGNhc3QnLFxuICAgICctYScsIEFOSU1BVElPTl9TRVRUSU5HX0FDVElPTixcbiAgICAnLW4nLCBBTklNQVRJT05fU0VUVElOR19SRUNFSVZFUixcbiAgICAnLS1lcycsICdzZXRzdGF0dXMnLCBvbiA/ICdlbmFibGUnIDogJ2Rpc2FibGUnXG4gIF0pO1xufTtcblxuLyoqXG4gKiBDaGFuZ2UgdGhlIGxvY2FsZSBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuIERvbid0IG5lZWQgdG8gcmVib290IHRoZSBkZXZpY2UgYWZ0ZXIgY2hhbmdpbmcgdGhlIGxvY2FsZS5cbiAqIFRoaXMgbWV0aG9kIHNldHMgYW4gYXJiaXRyYXJ5IGxvY2FsZSBmb2xsb3dpbmc6XG4gKiAgIGh0dHBzOi8vZGV2ZWxvcGVyLmFuZHJvaWQuY29tL3JlZmVyZW5jZS9qYXZhL3V0aWwvTG9jYWxlLmh0bWxcbiAqICAgaHR0cHM6Ly9kZXZlbG9wZXIuYW5kcm9pZC5jb20vcmVmZXJlbmNlL2phdmEvdXRpbC9Mb2NhbGUuaHRtbCNMb2NhbGUoamF2YS5sYW5nLlN0cmluZywlMjBqYXZhLmxhbmcuU3RyaW5nKVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBsYW5ndWFnZSAtIExhbmd1YWdlLiBlLmcuIGVuLCBqYVxuICogQHBhcmFtIHtzdHJpbmd9IGNvdW50cnkgLSBDb3VudHJ5LiBlLmcuIFVTLCBKUFxuICogQHBhcmFtIHs/c3RyaW5nfSBzY3JpcHQgLSBTY3JpcHQuIGUuZy4gSGFucyBpbiBgemgtSGFucy1DTmBcbiAqL1xuY29tbWFuZHMuc2V0RGV2aWNlU3lzTG9jYWxlVmlhU2V0dGluZ0FwcCA9IGFzeW5jIGZ1bmN0aW9uIHNldERldmljZVN5c0xvY2FsZVZpYVNldHRpbmdBcHAgKGxhbmd1YWdlLCBjb3VudHJ5LCBzY3JpcHQgPSBudWxsKSB7XG4gIGNvbnN0IHBhcmFtcyA9IFtcbiAgICAnYW0nLCAnYnJvYWRjYXN0JyxcbiAgICAnLWEnLCBMT0NBTEVfU0VUVElOR19BQ1RJT04sXG4gICAgJy1uJywgTE9DQUxFX1NFVFRJTkdfUkVDRUlWRVIsXG4gICAgJy0tZXMnLCAnbGFuZycsIGxhbmd1YWdlLnRvTG93ZXJDYXNlKCksXG4gICAgJy0tZXMnLCAnY291bnRyeScsIGNvdW50cnkudG9VcHBlckNhc2UoKVxuICBdO1xuXG4gIGlmIChzY3JpcHQpIHtcbiAgICBwYXJhbXMucHVzaCgnLS1lcycsICdzY3JpcHQnLCBzY3JpcHQpO1xuICB9XG5cbiAgYXdhaXQgdGhpcy5zaGVsbChwYXJhbXMpO1xufTtcblxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IExvY2F0aW9uXG4gKiBAcHJvcGVydHkge251bWJlcnxzdHJpbmd9IGxvbmdpdHVkZSAtIFZhbGlkIGxvbmdpdHVkZSB2YWx1ZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfHN0cmluZ30gbGF0aXR1ZGUgLSBWYWxpZCBsYXRpdHVkZSB2YWx1ZS5cbiAqIEBwcm9wZXJ0eSB7P251bWJlcnxzdHJpbmd9IGFsdGl0dWRlIC0gVmFsaWQgYWx0aXR1ZGUgdmFsdWUuXG4gKiBAcHJvcGVydHkgez9udW1iZXJ8c3RyaW5nfSBzYXRlbGxpdGVzIFsxMl0gLSBOdW1iZXIgb2Ygc2F0ZWxsaXRlcyBiZWluZyB0cmFja2VkICgxLTEyKS5cbiAqIFRoaXMgdmFsdWUgaXMgaWdub3JlZCBvbiByZWFsIGRldmljZXMuXG4gKiBAcHJvcGVydHkgez9udW1iZXJ8c3RyaW5nfSBzcGVlZCAtIFZhbGlkIHNwZWVkIHZhbHVlLlxuICogU2hvdWxkIGJlIGdyZWF0ZXIgdGhhbiAwLjAgbWV0ZXJzL3NlY29uZCBmb3IgcmVhbCBkZXZpY2VzIG9yIDAuMCBrbm90c1xuICogZm9yIGVtdWxhdG9ycy5cbiAqL1xuXG4vKipcbiAqIEVtdWxhdGUgZ2VvbG9jYXRpb24gY29vcmRpbmF0ZXMgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEBwYXJhbSB7TG9jYXRpb259IGxvY2F0aW9uIC0gTG9jYXRpb24gb2JqZWN0LiBUaGUgYGFsdGl0dWRlYCB2YWx1ZSBpcyBpZ25vcmVkXG4gKiB3aGlsZSBtb2NraW5nIHRoZSBwb3NpdGlvbi5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNFbXVsYXRvciBbZmFsc2VdIC0gU2V0IGl0IHRvIHRydWUgaWYgdGhlIGRldmljZSB1bmRlciB0ZXN0XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzIGFuIGVtdWxhdG9yIHJhdGhlciB0aGFuIGEgcmVhbCBkZXZpY2UuXG4gKi9cbmNvbW1hbmRzLnNldEdlb0xvY2F0aW9uID0gYXN5bmMgZnVuY3Rpb24gc2V0R2VvTG9jYXRpb24gKGxvY2F0aW9uLCBpc0VtdWxhdG9yID0gZmFsc2UpIHtcbiAgY29uc3QgZm9ybWF0TG9jYXRpb25WYWx1ZSA9ICh2YWx1ZU5hbWUsIGlzUmVxdWlyZWQgPSB0cnVlKSA9PiB7XG4gICAgaWYgKCF1dGlsLmhhc1ZhbHVlKGxvY2F0aW9uW3ZhbHVlTmFtZV0pKSB7XG4gICAgICBpZiAoaXNSZXF1aXJlZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7dmFsdWVOYW1lfSBtdXN0IGJlIHByb3ZpZGVkYCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgZmxvYXRWYWx1ZSA9IHBhcnNlRmxvYXQobG9jYXRpb25bdmFsdWVOYW1lXSk7XG4gICAgaWYgKCFpc05hTihmbG9hdFZhbHVlKSkge1xuICAgICAgcmV0dXJuIGAke18uY2VpbChmbG9hdFZhbHVlLCA1KX1gO1xuICAgIH1cbiAgICBpZiAoaXNSZXF1aXJlZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGAke3ZhbHVlTmFtZX0gaXMgZXhwZWN0ZWQgdG8gYmUgYSB2YWxpZCBmbG9hdCBudW1iZXIuIGAgK1xuICAgICAgICBgJyR7bG9jYXRpb25bdmFsdWVOYW1lXX0nIGlzIGdpdmVuIGluc3RlYWRgKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG4gIGNvbnN0IGxvbmdpdHVkZSA9IGZvcm1hdExvY2F0aW9uVmFsdWUoJ2xvbmdpdHVkZScpO1xuICBjb25zdCBsYXRpdHVkZSA9IGZvcm1hdExvY2F0aW9uVmFsdWUoJ2xhdGl0dWRlJyk7XG4gIGNvbnN0IGFsdGl0dWRlID0gZm9ybWF0TG9jYXRpb25WYWx1ZSgnYWx0aXR1ZGUnLCBmYWxzZSk7XG4gIGNvbnN0IHNwZWVkID0gZm9ybWF0TG9jYXRpb25WYWx1ZSgnc3BlZWQnLCBmYWxzZSk7XG4gIGlmIChpc0VtdWxhdG9yKSB7XG4gICAgY29uc3QgYXJncyA9IFtsb25naXR1ZGUsIGxhdGl0dWRlXTtcbiAgICBpZiAoIV8uaXNOaWwoYWx0aXR1ZGUpKSB7XG4gICAgICBhcmdzLnB1c2goYWx0aXR1ZGUpO1xuICAgIH1cbiAgICBjb25zdCBzYXRlbGxpdGVzID0gcGFyc2VJbnQobG9jYXRpb24uc2F0ZWxsaXRlcywgMTApO1xuICAgIGlmICghTnVtYmVyLmlzTmFOKHNhdGVsbGl0ZXMpICYmIHNhdGVsbGl0ZXMgPiAwICYmIHNhdGVsbGl0ZXMgPD0gMTIpIHtcbiAgICAgIGlmIChhcmdzLmxlbmd0aCA8IDMpIHtcbiAgICAgICAgYXJncy5wdXNoKGAke0RFRkFVTFRfQUxUSVRVREV9YCk7XG4gICAgICB9XG4gICAgICBhcmdzLnB1c2goYCR7c2F0ZWxsaXRlc31gKTtcbiAgICB9XG4gICAgaWYgKCFfLmlzTmlsKHNwZWVkKSkge1xuICAgICAgaWYgKGFyZ3MubGVuZ3RoIDwgMykge1xuICAgICAgICBhcmdzLnB1c2goYCR7REVGQVVMVF9BTFRJVFVERX1gKTtcbiAgICAgIH1cbiAgICAgIGlmIChhcmdzLmxlbmd0aCA8IDQpIHtcbiAgICAgICAgYXJncy5wdXNoKGAke0RFRkFVTFRfU0FURUxMSVRFU19DT1VOVH1gKTtcbiAgICAgIH1cbiAgICAgIGFyZ3MucHVzaChzcGVlZCk7XG4gICAgfVxuICAgIGF3YWl0IHRoaXMucmVzZXRUZWxuZXRBdXRoVG9rZW4oKTtcbiAgICBhd2FpdCB0aGlzLmFkYkV4ZWMoWydlbXUnLCAnZ2VvJywgJ2ZpeCcsIC4uLmFyZ3NdKTtcbiAgICAvLyBBIHdvcmthcm91bmQgZm9yIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvYW5kcm9pZC9pc3N1ZXMvZGV0YWlsP2lkPTIwNjE4MFxuICAgIGF3YWl0IHRoaXMuYWRiRXhlYyhbJ2VtdScsICdnZW8nLCAnZml4JywgLi4uKGFyZ3MubWFwKChhcmcpID0+IGFyZy5yZXBsYWNlKCcuJywgJywnKSkpXSk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgYXJncyA9IFtcbiAgICAgICdhbScsIChhd2FpdCB0aGlzLmdldEFwaUxldmVsKCkgPj0gMjYpID8gJ3N0YXJ0LWZvcmVncm91bmQtc2VydmljZScgOiAnc3RhcnRzZXJ2aWNlJyxcbiAgICAgICctZScsICdsb25naXR1ZGUnLCBsb25naXR1ZGUsXG4gICAgICAnLWUnLCAnbGF0aXR1ZGUnLCBsYXRpdHVkZSxcbiAgICBdO1xuICAgIGlmICh1dGlsLmhhc1ZhbHVlKGFsdGl0dWRlKSkge1xuICAgICAgYXJncy5wdXNoKCctZScsICdhbHRpdHVkZScsIGFsdGl0dWRlKTtcbiAgICB9XG4gICAgaWYgKHV0aWwuaGFzVmFsdWUoc3BlZWQpKSB7XG4gICAgICBhcmdzLnB1c2goJy1lJywgJ3NwZWVkJywgc3BlZWQpO1xuICAgIH1cbiAgICBhcmdzLnB1c2goTE9DQVRJT05fU0VSVklDRSk7XG4gICAgYXdhaXQgdGhpcy5zaGVsbChhcmdzKTtcbiAgfVxufTtcblxuLyoqXG4gKiBHZXQgdGhlIGN1cnJlbnQgY2FjaGVkIEdQUyBsb2NhdGlvbiBmcm9tIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqXG4gKiBAcmV0dXJucyB7TG9jYXRpb259IFRoZSBjdXJyZW50IGxvY2F0aW9uXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIGN1cnJlbnQgbG9jYXRpb24gY2Fubm90IGJlIHJldHJpZXZlZFxuICovXG5jb21tYW5kcy5nZXRHZW9Mb2NhdGlvbiA9IGFzeW5jIGZ1bmN0aW9uIGdldEdlb0xvY2F0aW9uICgpIHtcbiAgYXdhaXQgdGhpcy5yZXF1aXJlUnVubmluZ1NldHRpbmdzQXBwKHtzaG91bGRSZXN0b3JlQ3VycmVudEFwcDogdHJ1ZX0pO1xuXG4gIGxldCBvdXRwdXQ7XG4gIHRyeSB7XG4gICAgb3V0cHV0ID0gYXdhaXQgdGhpcy5zaGVsbChbXG4gICAgICAnYW0nLCAnYnJvYWRjYXN0JyxcbiAgICAgICctbicsIExPQ0FUSU9OX1JFQ0VJVkVSLFxuICAgICAgJy1hJywgTE9DQVRJT05fUkVUUklFVkFMX0FDVElPTixcbiAgICBdKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgcmV0cmlldmUgdGhlIGN1cnJlbnQgZ2VvIGNvb3JkaW5hdGVzIGZyb20gdGhlIGRldmljZS4gYCArXG4gICAgICBgTWFrZSBzdXJlIHRoZSBBcHBpdW0gU2V0dGluZ3MgYXBwbGljYXRpb24gaXMgdXAgdG8gZGF0ZSBhbmQgaGFzIGxvY2F0aW9uIHBlcm1pc3Npb25zLiBBbHNvIHRoZSBsb2NhdGlvbiBgICtcbiAgICAgIGBzZXJ2aWNlcyBtdXN0IGJlIGVuYWJsZWQgb24gdGhlIGRldmljZS4gT3JpZ2luYWwgZXJyb3I6ICR7ZXJyLnN0ZGVyciB8fCBlcnIuc3Rkb3V0IHx8IGVyci5tZXNzYWdlfWApO1xuICB9XG5cbiAgY29uc3QgbWF0Y2ggPSBHUFNfQ09PUkRJTkFURVNfUEFUVEVSTi5leGVjKG91dHB1dCk7XG4gIGlmICghbWF0Y2gpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBwYXJzZSB0aGUgYWN0dWFsIGxvY2F0aW9uIHZhbHVlcyBmcm9tIHRoZSBjb21tYW5kIG91dHB1dDogJHtvdXRwdXR9YCk7XG4gIH1cbiAgY29uc3QgbG9jYXRpb24gPSB7XG4gICAgbGF0aXR1ZGU6IG1hdGNoWzFdLFxuICAgIGxvbmdpdHVkZTogbWF0Y2hbMl0sXG4gICAgYWx0aXR1ZGU6IG1hdGNoWzNdLFxuICB9O1xuICBsb2cuZGVidWcoYEdvdCBnZW8gY29vcmRpbmF0ZXM6ICR7SlNPTi5zdHJpbmdpZnkobG9jYXRpb24pfWApO1xuICByZXR1cm4gbG9jYXRpb247XG59O1xuXG4vKipcbiAqIFNlbmRzIGFuIGFzeW5jIHJlcXVlc3QgdG8gcmVmcmVzaCB0aGUgR1BTIGNhY2hlLlxuICogVGhpcyBmZWF0dXJlIG9ubHkgd29ya3MgaWYgdGhlIGRldmljZSB1bmRlciB0ZXN0IGhhc1xuICogR29vZ2xlIFBsYXkgU2VydmljZXMgaW5zdGFsbGVkLiBJbiBjYXNlIHRoZSB2YW5pbGxhXG4gKiBMb2NhdGlvbk1hbmFnZXIgaXMgdXNlZCB0aGUgZGV2aWNlIEFQSSBsZXZlbCBtdXN0IGJlIGF0XG4gKiB2ZXJzaW9uIDMwIChBbmRyb2lkIFIpIG9yIGhpZ2hlci5cbiAqXG4gKiBAcGFyYW0gdGltZW91dE1zIFsyMDAwMF0gVGhlIG1heGltdW0gbnVtYmVyIG9mIG1pbGxpc2Vjb25kc1xuICogdG8gYmxvY2sgdW50aWwgR1BTIGNhY2hlIGlzIHJlZnJlc2hlZC4gUHJvdmlkaW5nIHplcm8gb3IgYSBuZWdhdGl2ZVxuICogdmFsdWUgdG8gaXQgc2tpcHMgd2FpdGluZyBjb21wbGV0ZWx5LlxuICpcbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgR1BTIGNhY2hlIGNhbm5vdCBiZSByZWZyZXNoZWQuXG4gKi9cbmNvbW1hbmRzLnJlZnJlc2hHZW9Mb2NhdGlvbkNhY2hlID0gYXN5bmMgZnVuY3Rpb24gcmVmcmVzaEdlb0xvY2F0aW9uQ2FjaGUgKHRpbWVvdXRNcyA9IDIwMDAwKSB7XG4gIGF3YWl0IHRoaXMucmVxdWlyZVJ1bm5pbmdTZXR0aW5nc0FwcCh7c2hvdWxkUmVzdG9yZUN1cnJlbnRBcHA6IHRydWV9KTtcblxuICBsZXQgbG9nY2F0TW9uaXRvcjtcbiAgbGV0IG1vbml0b3JpbmdQcm9taXNlO1xuXG4gIGlmICh0aW1lb3V0TXMgPiAwKSB7XG4gICAgY29uc3QgY21kID0gW1xuICAgICAgLi4udGhpcy5leGVjdXRhYmxlLmRlZmF1bHRBcmdzLFxuICAgICAgJ2xvZ2NhdCcsICctcycsIExPQ0FUSU9OX1RSQUNLRVJfVEFHLFxuICAgIF07XG4gICAgbG9nY2F0TW9uaXRvciA9IG5ldyBTdWJQcm9jZXNzKHRoaXMuZXhlY3V0YWJsZS5wYXRoLCBjbWQpO1xuICAgIGNvbnN0IHRpbWVvdXRFcnJvck1zZyA9IGBUaGUgR1BTIGNhY2hlIGhhcyBub3QgYmVlbiByZWZyZXNoZWQgd2l0aGluICR7dGltZW91dE1zfW1zIHRpbWVvdXQuIGAgK1xuICAgICAgYFBsZWFzZSBtYWtlIHN1cmUgdGhlIGRldmljZSB1bmRlciB0ZXN0IGhhcyBBcHBpdW0gU2V0dGluZ3MgYXBwIGluc3RhbGxlZCBhbmQgcnVubmluZy4gYCArXG4gICAgICBgQWxzbywgaXQgaXMgcmVxdWlyZWQgdGhhdCB0aGUgZGV2aWNlIGhhcyBHb29nbGUgUGxheSBTZXJ2aWNlcyBpbnN0YWxsZWQgb3IgaXMgcnVubmluZyBgICtcbiAgICAgIGBBbmRyb2lkIDEwKyBvdGhlcndpc2UuYDtcbiAgICBtb25pdG9yaW5nUHJvbWlzZSA9IG5ldyBCKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4gcmVqZWN0KG5ldyBFcnJvcih0aW1lb3V0RXJyb3JNc2cpKSwgdGltZW91dE1zKTtcblxuICAgICAgbG9nY2F0TW9uaXRvci5vbignZXhpdCcsICgpID0+IHJlamVjdChuZXcgRXJyb3IodGltZW91dEVycm9yTXNnKSkpO1xuICAgICAgWydsaW5lcy1zdGRlcnInLCAnbGluZXMtc3Rkb3V0J10ubWFwKChldnQpID0+IGxvZ2NhdE1vbml0b3Iub24oZXZ0LCAobGluZXMpID0+IHtcbiAgICAgICAgaWYgKGxpbmVzLnNvbWUoKGxpbmUpID0+IEdQU19DQUNIRV9SRUZSRVNIRURfTE9HUy5zb21lKCh4KSA9PiBsaW5lLmluY2x1ZGVzKHgpKSkpIHtcbiAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgIH0pKTtcbiAgICB9KTtcbiAgICBhd2FpdCBsb2djYXRNb25pdG9yLnN0YXJ0KDApO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBhd2FpdCB0aGlzLnNoZWxsKFtcbiAgICAgICdhbScsICdicm9hZGNhc3QnLFxuICAgICAgJy1uJywgTE9DQVRJT05fUkVDRUlWRVIsXG4gICAgICAnLWEnLCBMT0NBVElPTl9SRVRSSUVWQUxfQUNUSU9OLFxuICAgICAgJy0tZXonLCAnZm9yY2VVcGRhdGUnLCAndHJ1ZScsXG4gICAgXSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IHJlZnJlc2ggdGhlIEdQUyBjYWNoZSBvbiB0aGUgZGV2aWNlLiBgICtcbiAgICAgIGBNYWtlIHN1cmUgdGhlIEFwcGl1bSBTZXR0aW5ncyBhcHBsaWNhdGlvbiBpcyB1cCB0byBkYXRlIGFuZCBoYXMgbG9jYXRpb24gcGVybWlzc2lvbnMuIEFsc28gdGhlIGxvY2F0aW9uIGAgK1xuICAgICAgYHNlcnZpY2VzIG11c3QgYmUgZW5hYmxlZCBvbiB0aGUgZGV2aWNlLiBPcmlnaW5hbCBlcnJvcjogJHtlcnIuc3RkZXJyIHx8IGVyci5zdGRvdXQgfHwgZXJyLm1lc3NhZ2V9YCk7XG4gIH1cblxuICBpZiAobG9nY2F0TW9uaXRvciAmJiBtb25pdG9yaW5nUHJvbWlzZSkge1xuICAgIGNvbnN0IHRpbWVyID0gbmV3IHRpbWluZy5UaW1lcigpLnN0YXJ0KCk7XG4gICAgbG9nLmRlYnVnKGBXYWl0aW5nIHVwIHRvICR7dGltZW91dE1zfW1zIGZvciB0aGUgR1BTIGNhY2hlIHRvIGJlIHJlZnJlc2hlZGApO1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCBtb25pdG9yaW5nUHJvbWlzZTtcbiAgICAgIGxvZy5pbmZvKGBUaGUgR1BTIGNhY2hlIGhhcyBiZWVuIHN1Y2Nlc3NmdWxseSByZWZyZXNoZWQgYWZ0ZXIgYCArXG4gICAgICAgIGAke3RpbWVyLmdldER1cmF0aW9uKCkuYXNNaWxsaVNlY29uZHMudG9GaXhlZCgwKX1tc2ApO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBpZiAobG9nY2F0TW9uaXRvci5pc1J1bm5pbmcpIHtcbiAgICAgICAgYXdhaXQgbG9nY2F0TW9uaXRvci5zdG9wKCk7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGxvZy5pbmZvKCdUaGUgcmVxdWVzdCB0byByZWZyZXNoIHRoZSBHUFMgY2FjaGUgaGFzIGJlZW4gc2VudC4gU2tpcHBpbmcgd2FpdGluZyBmb3IgaXRzIHJlc3VsdC4nKTtcbiAgfVxufTtcblxuLyoqXG4gKiBQZXJmb3JtcyB0aGUgZ2l2ZW4gZWRpdG9yIGFjdGlvbiBvbiB0aGUgZm9jdXNlZCBpbnB1dCBmaWVsZC5cbiAqIFRoaXMgbWV0aG9kIHJlcXVpcmVzIEFwcGl1bSBTZXR0aW5ncyBoZWxwZXIgdG8gYmUgaW5zdGFsbGVkIG9uIHRoZSBkZXZpY2UuXG4gKiBObyBleGNlcHRpb24gaXMgdGhyb3duIGlmIHRoZXJlIHdhcyBhIGZhaWx1cmUgd2hpbGUgcGVyZm9ybWluZyB0aGUgYWN0aW9uLlxuICogWW91IG11c3QgaW52ZXN0aWdhdGUgdGhlIGxvZ2NhdCBvdXRwdXQgaWYgc29tZXRoaW5nIGRpZCBub3Qgd29yayBhcyBleHBlY3RlZC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IGFjdGlvbiAtIEVpdGhlciBhY3Rpb24gY29kZSBvciBuYW1lLiBUaGUgZm9sbG93aW5nIGFjdGlvblxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lcyBhcmUgc3VwcG9ydGVkOiBgbm9ybWFsLCB1bnNwZWNpZmllZCwgbm9uZSxcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ28sIHNlYXJjaCwgc2VuZCwgbmV4dCwgZG9uZSwgcHJldmlvdXNgXG4gKi9cbmNvbW1hbmRzLnBlcmZvcm1FZGl0b3JBY3Rpb24gPSBhc3luYyBmdW5jdGlvbiBwZXJmb3JtRWRpdG9yQWN0aW9uIChhY3Rpb24pIHtcbiAgbG9nLmRlYnVnKGBQZXJmb3JtaW5nIGVkaXRvciBhY3Rpb246ICR7YWN0aW9ufWApO1xuICBhd2FpdCB0aGlzLnJ1bkluSW1lQ29udGV4dChBUFBJVU1fSU1FLFxuICAgIGFzeW5jICgpID0+IGF3YWl0IHRoaXMuc2hlbGwoWydpbnB1dCcsICd0ZXh0JywgYC8ke2FjdGlvbn0vYF0pKTtcbn07XG5cbi8qKlxuICogUmV0cmlldmVzIHRoZSB0ZXh0IGNvbnRlbnQgb2YgdGhlIGRldmljZSdzIGNsaXBib2FyZC5cbiAqIFRoZSBtZXRob2Qgd29ya3MgZm9yIEFuZHJvaWQgYmVsb3cgYW5kIGFib3ZlIDI5LlxuICogSXQgdGVtb3JhcmlseSBlbmZvcmNlcyB0aGUgSU1FIHNldHRpbmcgaW4gb3JkZXIgdG8gd29ya2Fyb3VuZFxuICogc2VjdXJpdHkgbGltaXRhdGlvbnMgaWYgbmVlZGVkLlxuICogVGhpcyBtZXRob2Qgb25seSB3b3JrcyBpZiBBcHBpdW0gU2V0dGluZ3Mgdi4gMi4xNSsgaXMgaW5zdGFsbGVkXG4gKiBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3RcbiAqXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgYWN0dWFsIGNvbnRlbnQgb2YgdGhlIG1haW4gY2xpcGJvYXJkIGFzXG4gKiBiYXNlNjQtZW5jb2RlZCBzdHJpbmcgb3IgYW4gZW1wdHkgc3RyaW5nIGlmIHRoZSBjbGlwYm9hcmQgaXMgZW1wdHlcbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGVyZSB3YXMgYSBwcm9ibGVtIHdoaWxlIGdldHRpbmcgdGhlXG4gKiBjbGlwYm9hcmQgY29udGFudFxuICovXG5jb21tYW5kcy5nZXRDbGlwYm9hcmQgPSBhc3luYyBmdW5jdGlvbiBnZXRDbGlwYm9hcmQgKCkge1xuICBsb2cuZGVidWcoJ0dldHRpbmcgdGhlIGNsaXBib2FyZCBjb250ZW50Jyk7XG4gIGF3YWl0IHRoaXMucmVxdWlyZVJ1bm5pbmdTZXR0aW5nc0FwcCh7c2hvdWxkUmVzdG9yZUN1cnJlbnRBcHA6IHRydWV9KTtcbiAgY29uc3QgcmV0cmlldmVDbGlwYm9hcmQgPSBhc3luYyAoKSA9PiBhd2FpdCB0aGlzLnNoZWxsKFtcbiAgICAnYW0nLCAnYnJvYWRjYXN0JyxcbiAgICAnLW4nLCBDTElQQk9BUkRfUkVDRUlWRVIsXG4gICAgJy1hJywgQ0xJUEJPQVJEX1JFVFJJRVZBTF9BQ1RJT04sXG4gIF0pO1xuICBsZXQgb3V0cHV0O1xuICB0cnkge1xuICAgIG91dHB1dCA9IChhd2FpdCB0aGlzLmdldEFwaUxldmVsKCkgPj0gMjkpXG4gICAgICA/IChhd2FpdCB0aGlzLnJ1bkluSW1lQ29udGV4dChBUFBJVU1fSU1FLCByZXRyaWV2ZUNsaXBib2FyZCkpXG4gICAgICA6IChhd2FpdCByZXRyaWV2ZUNsaXBib2FyZCgpKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgcmV0cmlldmUgdGhlIGN1cnJlbnQgY2xpcGJvYXJkIGNvbnRlbnQgZnJvbSB0aGUgZGV2aWNlLiBgICtcbiAgICAgIGBNYWtlIHN1cmUgdGhlIEFwcGl1bSBTZXR0aW5ncyBhcHBsaWNhdGlvbiBpcyB1cCB0byBkYXRlLiBgICtcbiAgICAgIGBPcmlnaW5hbCBlcnJvcjogJHtlcnIubWVzc2FnZX1gKTtcbiAgfVxuXG4gIGNvbnN0IG1hdGNoID0gL2RhdGE9XCIoW15cIl0qKVwiLy5leGVjKG91dHB1dCk7XG4gIGlmICghbWF0Y2gpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBwYXJzZSB0aGUgYWN0dWFsIGNsaWJvYXJkIGNvbnRlbnQgZnJvbSB0aGUgY29tbWFuZCBvdXRwdXQ6ICR7b3V0cHV0fWApO1xuICB9XG4gIHJldHVybiBfLnRyaW0obWF0Y2hbMV0pO1xufTtcblxuLyoqXG4gKiBSZXRyaWV2ZXMgQW5kcm9pZCBub3RpZmljYXRpb25zIHZpYSBBcHBpdW0gU2V0dGluZ3MgaGVscGVyLlxuICogQXBwaXVtIFNldHRpbmdzIGFwcCBpdHNlbGYgbXVzdCBiZSAqbWFudWFsbHkqIGdyYW50ZWQgdG8gYWNjZXNzIG5vdGlmaWNhdGlvbnNcbiAqIHVuZGVyIGRldmljZSBTZXR0aW5ncyBpbiBvcmRlciB0byBtYWtlIHRoaXMgZmVhdHVyZSB3b3JraW5nLlxuICogQXBwaXVtIFNldHRpbmdzIGhlbHBlciBrZWVwcyBhbGwgdGhlIGFjdGl2ZSBub3RpZmljYXRpb25zIHBsdXNcbiAqIG5vdGlmaWNhdGlvbnMgdGhhdCBhcHBlYXJlZCB3aGlsZSBpdCB3YXMgcnVubmluZyBpbiB0aGUgaW50ZXJuYWwgYnVmZmVyLFxuICogYnV0IG5vIG1vcmUgdGhhbiAxMDAgaXRlbXMgYWx0b2dldGhlci4gTmV3bHkgYXBwZWFyZWQgbm90aWZpY2F0aW9uc1xuICogYXJlIGFsd2F5cyBhZGRlZCB0byB0aGUgaGVhZCBvZiB0aGUgbm90aWZpY2F0aW9ucyBhcnJheS5cbiAqIFRoZSBgaXNSZW1vdmVkYCBmbGFnIGlzIHNldCB0byBgdHJ1ZWAgZm9yIG5vdGlmaWNhdGlvbnMgdGhhdCBoYXZlIGJlZW4gcmVtb3ZlZC5cbiAqXG4gKiBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIuYW5kcm9pZC5jb20vcmVmZXJlbmNlL2FuZHJvaWQvc2VydmljZS9ub3RpZmljYXRpb24vU3RhdHVzQmFyTm90aWZpY2F0aW9uXG4gKiBhbmQgaHR0cHM6Ly9kZXZlbG9wZXIuYW5kcm9pZC5jb20vcmVmZXJlbmNlL2FuZHJvaWQvYXBwL05vdGlmaWNhdGlvbi5odG1sXG4gKiBmb3IgbW9yZSBpbmZvcm1hdGlvbiBvbiBhdmFpbGFibGUgbm90aWZpY2F0aW9uIHByb3BlcnRpZXMgYW5kIHRoZWlyIHZhbHVlcy5cbiAqXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBUaGUgZXhhbXBsZSBvdXRwdXQgaXM6XG4gKiBgYGBqc29uXG4gKiB7XG4gKiAgIFwic3RhdHVzQmFyTm90aWZpY2F0aW9uc1wiOltcbiAqICAgICB7XG4gKiAgICAgICBcImlzR3JvdXBcIjpmYWxzZSxcbiAqICAgICAgIFwicGFja2FnZU5hbWVcIjpcImlvLmFwcGl1bS5zZXR0aW5nc1wiLFxuICogICAgICAgXCJpc0NsZWFyYWJsZVwiOmZhbHNlLFxuICogICAgICAgXCJpc09uZ29pbmdcIjp0cnVlLFxuICogICAgICAgXCJpZFwiOjEsXG4gKiAgICAgICBcInRhZ1wiOm51bGwsXG4gKiAgICAgICBcIm5vdGlmaWNhdGlvblwiOntcbiAqICAgICAgICAgXCJ0aXRsZVwiOm51bGwsXG4gKiAgICAgICAgIFwiYmlnVGl0bGVcIjpcIkFwcGl1bSBTZXR0aW5nc1wiLFxuICogICAgICAgICBcInRleHRcIjpudWxsLFxuICogICAgICAgICBcImJpZ1RleHRcIjpcIktlZXAgdGhpcyBzZXJ2aWNlIHJ1bm5pbmcsIHNvIEFwcGl1bSBmb3IgQW5kcm9pZCBjYW4gcHJvcGVybHkgaW50ZXJhY3Qgd2l0aCBzZXZlcmFsIHN5c3RlbSBBUElzXCIsXG4gKiAgICAgICAgIFwidGlja2VyVGV4dFwiOm51bGwsXG4gKiAgICAgICAgIFwic3ViVGV4dFwiOm51bGwsXG4gKiAgICAgICAgIFwiaW5mb1RleHRcIjpudWxsLFxuICogICAgICAgICBcInRlbXBsYXRlXCI6XCJhbmRyb2lkLmFwcC5Ob3RpZmljYXRpb24kQmlnVGV4dFN0eWxlXCJcbiAqICAgICAgIH0sXG4gKiAgICAgICBcInVzZXJIYW5kbGVcIjowLFxuICogICAgICAgXCJncm91cEtleVwiOlwiMHxpby5hcHBpdW0uc2V0dGluZ3N8MXxudWxsfDEwMTMzXCIsXG4gKiAgICAgICBcIm92ZXJyaWRlR3JvdXBLZXlcIjpudWxsLFxuICogICAgICAgXCJwb3N0VGltZVwiOjE1NzY4NTM1MTg4NTAsXG4gKiAgICAgICBcImtleVwiOlwiMHxpby5hcHBpdW0uc2V0dGluZ3N8MXxudWxsfDEwMTMzXCIsXG4gKiAgICAgICBcImlzUmVtb3ZlZFwiOmZhbHNlXG4gKiAgICAgfVxuICogICBdXG4gKiB9XG4gKiBgYGBcbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGVyZSB3YXMgYW4gZXJyb3Igd2hpbGUgZ2V0dGluZyB0aGUgbm90aWZpY2F0aW9ucyBsaXN0XG4gKi9cbmNvbW1hbmRzLmdldE5vdGlmaWNhdGlvbnMgPSBhc3luYyBmdW5jdGlvbiBnZXROb3RpZmljYXRpb25zICgpIHtcbiAgbG9nLmRlYnVnKCdSZXRyaWV2aW5nIG5vdGlmaWNhdGlvbnMnKTtcbiAgLy8gU29tZWhvdyBwcm92aWRpbmcgdGhlIGAtbmAgYXJnIHRvIHRoZSBgYW1gIHVuZGVybmVhdGhcbiAgLy8gcmVuZGVycyB0aGUgYnJvYWRjYXN0IHRvIGZhaWwgaW5zdGVhZCBvZiBzdGFydGluZyB0aGVcbiAgLy8gQXBwaXVtIFNldHRpbmdzIGFwcC4gVGhpcyBvbmx5IGhhcHBlbnMgdG8gdGhlIG5vdGlmaWNhdGlvbnNcbiAgLy8gcmVjZWl2ZXJcbiAgYXdhaXQgdGhpcy5yZXF1aXJlUnVubmluZ1NldHRpbmdzQXBwKHtzaG91bGRSZXN0b3JlQ3VycmVudEFwcDogdHJ1ZX0pO1xuICBsZXQgb3V0cHV0O1xuICB0cnkge1xuICAgIG91dHB1dCA9IGF3YWl0IHRoaXMuc2hlbGwoW1xuICAgICAgJ2FtJywgJ2Jyb2FkY2FzdCcsXG4gICAgICAnLWEnLCBOT1RJRklDQVRJT05TX1JFVFJJRVZBTF9BQ1RJT04sXG4gICAgXSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IHJldHJpZXZlIG5vdGlmaWNhdGlvbnMgZnJvbSB0aGUgZGV2aWNlLiBgICtcbiAgICAgIGBNYWtlIHN1cmUgdGhlIEFwcGl1bSBTZXR0aW5ncyBhcHBsaWNhdGlvbiBpcyBpbnN0YWxsZWQgYW5kIGlzIHVwIHRvIGRhdGUuIGAgK1xuICAgICAgYE9yaWdpbmFsIGVycm9yOiAke2Vyci5tZXNzYWdlfWApO1xuICB9XG4gIHJldHVybiBwYXJzZUpzb25EYXRhKG91dHB1dCwgJ25vdGlmaWNhdGlvbnMnKTtcbn07XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gU21zTGlzdE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBtYXggWzEwMF0gLSBUaGUgbWF4aW11bSBjb3VudCBvZiByZWNlbnQgbWVzc2FnZXNcbiAqIHRvIHJldHJpZXZlXG4gKi9cblxuLyoqXG4gKiBSZXRyaWV2ZXMgdGhlIGxpc3Qgb2YgdGhlIG1vc3QgcmVjZW50IFNNU1xuICogcHJvcGVydGllcyBsaXN0IHZpYSBBcHBpdW0gU2V0dGluZ3MgaGVscGVyLlxuICogTWVzc2FnZXMgYXJlIHNvcnRlZCBieSBkYXRlIGluIGRlc2NlbmRpbmcgb3JkZXIuXG4gKlxuICogQHBhcmFtIHtTbXNMaXN0T3B0aW9uc30gb3B0c1xuICogQHJldHVybnMge09iamVjdH0gVGhlIGV4YW1wbGUgb3V0cHV0IGlzOlxuICogYGBganNvblxuICoge1xuICogICBcIml0ZW1zXCI6W1xuICogICAgIHtcbiAqICAgICAgIFwiaWRcIjpcIjJcIixcbiAqICAgICAgIFwiYWRkcmVzc1wiOlwiKzEyMzQ1Njc4OVwiLFxuICogICAgICAgXCJwZXJzb25cIjpudWxsLFxuICogICAgICAgXCJkYXRlXCI6XCIxNTgxOTM2NDIyMjAzXCIsXG4gKiAgICAgICBcInJlYWRcIjpcIjBcIixcbiAqICAgICAgIFwic3RhdHVzXCI6XCItMVwiLFxuICogICAgICAgXCJ0eXBlXCI6XCIxXCIsXG4gKiAgICAgICBcInN1YmplY3RcIjpudWxsLFxuICogICAgICAgXCJib2R5XCI6XCJcXFwidGV4dCBtZXNzYWdlMlxcXCJcIixcbiAqICAgICAgIFwic2VydmljZUNlbnRlclwiOm51bGxcbiAqICAgICB9LFxuICogICAgIHtcbiAqICAgICAgIFwiaWRcIjpcIjFcIixcbiAqICAgICAgIFwiYWRkcmVzc1wiOlwiKzEyMzQ1Njc4OVwiLFxuICogICAgICAgXCJwZXJzb25cIjpudWxsLFxuICogICAgICAgXCJkYXRlXCI6XCIxNTgxOTM2MzgyNzQwXCIsXG4gKiAgICAgICBcInJlYWRcIjpcIjBcIixcbiAqICAgICAgIFwic3RhdHVzXCI6XCItMVwiLFxuICogICAgICAgXCJ0eXBlXCI6XCIxXCIsXG4gKiAgICAgICBcInN1YmplY3RcIjpudWxsLFxuICogICAgICAgXCJib2R5XCI6XCJcXFwidGV4dCBtZXNzYWdlXFxcIlwiLFxuICogICAgICAgXCJzZXJ2aWNlQ2VudGVyXCI6bnVsbFxuICogICAgIH1cbiAqICAgXSxcbiAqICAgXCJ0b3RhbFwiOjJcbiAqIH1cbiAqIGBgYFxuICogQHRocm93cyB7RXJyb3J9IElmIHRoZXJlIHdhcyBhbiBlcnJvciB3aGlsZSBnZXR0aW5nIHRoZSBTTVMgbGlzdFxuICovXG5jb21tYW5kcy5nZXRTbXNMaXN0ID0gYXN5bmMgZnVuY3Rpb24gZ2V0U21zTGlzdCAob3B0cyA9IHt9KSB7XG4gIGxvZy5kZWJ1ZygnUmV0cmlldmluZyB0aGUgcmVjZW50IFNNUyBtZXNzYWdlcycpO1xuICBhd2FpdCB0aGlzLnJlcXVpcmVSdW5uaW5nU2V0dGluZ3NBcHAoe3Nob3VsZFJlc3RvcmVDdXJyZW50QXBwOiB0cnVlfSk7XG4gIGNvbnN0IGFyZ3MgPSBbXG4gICAgJ2FtJywgJ2Jyb2FkY2FzdCcsXG4gICAgJy1uJywgU01TX0xJU1RfUkVDRUlWRVIsXG4gICAgJy1hJywgU01TX0xJU1RfUkVUUklFVkFMX0FDVElPTixcbiAgXTtcbiAgaWYgKG9wdHMubWF4KSB7XG4gICAgYXJncy5wdXNoKCctLWVzJywgJ21heCcsIG9wdHMubWF4KTtcbiAgfVxuICBsZXQgb3V0cHV0O1xuICB0cnkge1xuICAgIG91dHB1dCA9IGF3YWl0IHRoaXMuc2hlbGwoYXJncyk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IHJldHJpZXZlIFNNUyBsaXN0IGZyb20gdGhlIGRldmljZS4gYCArXG4gICAgICBgTWFrZSBzdXJlIHRoZSBBcHBpdW0gU2V0dGluZ3MgYXBwbGljYXRpb24gaXMgaW5zdGFsbGVkIGFuZCBpcyB1cCB0byBkYXRlLiBgICtcbiAgICAgIGBPcmlnaW5hbCBlcnJvcjogJHtlcnIubWVzc2FnZX1gKTtcbiAgfVxuICByZXR1cm4gcGFyc2VKc29uRGF0YShvdXRwdXQsICdTTVMgbGlzdCcpO1xufTtcblxuLyoqXG4gKiBUeXBlcyB0aGUgZ2l2ZW4gVW5pY29kZSBzdHJpbmcuXG4gKiBJdCBpcyBleHBlY3RlZCB0aGF0IHRoZSBmb2N1cyBpcyBhbHJlYWR5IHB1dFxuICogdG8gdGhlIGRlc3RpbmF0aW9uIGlucHV0IGZpZWxkIGJlZm9yZSB0aGlzIG1ldGhvZCBpcyBjYWxsZWQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHRleHQgVGhlIHN0cmluZyB0byB0eXBlXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gYHRydWVgIGlmIHRoZSBpbnB1dCB0ZXh0IGhhcyBiZWVuIHN1Y2Nlc3NmdWxseSBzZW50IHRvIGFkYlxuICovXG5jb21tYW5kcy50eXBlVW5pY29kZSA9IGFzeW5jIGZ1bmN0aW9uIHR5cGVVbmljb2RlICh0ZXh0KSB7XG4gIGlmIChfLmlzTmlsKHRleHQpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgdGV4dCA9IGAke3RleHR9YDtcbiAgbG9nLmRlYnVnKGBUeXBpbmcgJHt1dGlsLnBsdXJhbGl6ZSgnY2hhcmFjdGVyJywgdGV4dC5sZW5ndGgsIHRydWUpfWApO1xuICBpZiAoIXRleHQpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgYXdhaXQgdGhpcy5ydW5JbkltZUNvbnRleHQoXG4gICAgVU5JQ09ERV9JTUUsIGFzeW5jICgpID0+IGF3YWl0IHRoaXMuaW5wdXRUZXh0KGltYXAuZW5jb2RlKHRleHQpKVxuICApO1xuICByZXR1cm4gdHJ1ZTtcbn07XG5cbi8qKlxuICogUGVyZm9ybXMgcmVjdXJzaXZlIG1lZGlhIHNjYW4gYXQgdGhlIGdpdmVuIGRlc3RpbmF0aW9uLlxuICogQWxsIHN1Y2Nlc3NmdWxseSBzY2FubmVkIGl0ZW1zIGFyZSBiZWluZyBhZGRlZCB0byB0aGUgZGV2aWNlJ3NcbiAqIG1lZGlhIGxpYnJhcnkuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGRlc3RpbmF0aW9uIEZpbGUvZm9sZGVyIHBhdGggb24gdGhlIHJlbW90ZSBkZXZpY2UuXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlcmUgd2FzIGFuIHVuZXhwZWN0ZWQgZXJyb3IgYnkgc2Nhbm5pbmcuXG4gKi9cbmNvbW1hbmRzLnNjYW5NZWRpYSA9IGFzeW5jIGZ1bmN0aW9uIHNjYW5NZWRpYSAoZGVzdGluYXRpb24pIHtcbiAgbG9nLmRlYnVnKGBTY2FubmluZyAnJHtkZXN0aW5hdGlvbn0nIGZvciBtZWRpYSBmaWxlc2ApO1xuICBhd2FpdCB0aGlzLnJlcXVpcmVSdW5uaW5nU2V0dGluZ3NBcHAoe3Nob3VsZFJlc3RvcmVDdXJyZW50QXBwOiB0cnVlfSk7XG4gIGNvbnN0IG91dHB1dCA9IGF3YWl0IHRoaXMuc2hlbGwoW1xuICAgICdhbScsICdicm9hZGNhc3QnLFxuICAgICctbicsIE1FRElBX1NDQU5fUkVDRUlWRVIsXG4gICAgJy1hJywgTUVESUFfU0NBTl9BQ1RJT04sXG4gICAgJy0tZXMnLCAncGF0aCcsIGRlc3RpbmF0aW9uXG4gIF0pO1xuICBpZiAoIV8uaW5jbHVkZXMob3V0cHV0LCAncmVzdWx0PS0xJykpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYE5vIG1lZGlhIGNvdWxkIGJlIHNjYW5uZWQgYXQgJyR7ZGVzdGluYXRpb259Jy4gYCArXG4gICAgICBgQ2hlY2sgdGhlIGRldmljZSBsb2djYXQgb3V0cHV0IGZvciBtb3JlIGRldGFpbHMuYCk7XG4gIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNvbW1hbmRzO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQSxNQUFNQSxrQkFBa0IsR0FBRyxvQkFBb0I7QUFDL0MsTUFBTUMsNkJBQTZCLEdBQUcsV0FBVztBQUNqRCxNQUFNQyxnQ0FBZ0MsR0FBSSxHQUFFRixrQkFBbUIsMkNBQTBDO0FBQ3pHLE1BQU1HLDhCQUE4QixHQUFJLEdBQUVILGtCQUFtQixPQUFNO0FBQ25FLE1BQU1JLGdDQUFnQyxHQUFJLEdBQUVKLGtCQUFtQiwyQ0FBMEM7QUFDekcsTUFBTUssOEJBQThCLEdBQUksR0FBRUwsa0JBQW1CLGtCQUFpQjtBQUM5RSxNQUFNTSwwQkFBMEIsR0FBSSxHQUFFTixrQkFBbUIsc0NBQXFDO0FBQzlGLE1BQU1PLHdCQUF3QixHQUFJLEdBQUVQLGtCQUFtQixZQUFXO0FBQ2xFLE1BQU1RLHVCQUF1QixHQUFJLEdBQUVSLGtCQUFtQixtQ0FBa0M7QUFDeEYsTUFBTVMscUJBQXFCLEdBQUksR0FBRVQsa0JBQW1CLFNBQVE7QUFDNUQsTUFBTVUsZ0JBQWdCLEdBQUksR0FBRVYsa0JBQW1CLG1CQUFrQjtBQUNqRSxNQUFNVyxpQkFBaUIsR0FBSSxHQUFFWCxrQkFBbUIsa0NBQWlDO0FBQ2pGLE1BQU1ZLHlCQUF5QixHQUFJLEdBQUVaLGtCQUFtQixXQUFVO0FBQ2xFLE1BQU1hLGtCQUFrQixHQUFJLEdBQUViLGtCQUFtQiwrQkFBOEI7QUFDL0UsTUFBTWMsMEJBQTBCLEdBQUksR0FBRWQsa0JBQW1CLGdCQUFlO0FBQ3hFLE1BQU1lLDhCQUE4QixHQUFJLEdBQUVmLGtCQUFtQixnQkFBZTtBQUM1RSxNQUFNZ0IsaUJBQWlCLEdBQUksR0FBRWhCLGtCQUFtQix1QkFBc0I7QUFDdEUsTUFBTWlCLHlCQUF5QixHQUFJLEdBQUVqQixrQkFBbUIsV0FBVTtBQUNsRSxNQUFNa0IsbUJBQW1CLEdBQUksR0FBRWxCLGtCQUFtQixrQ0FBaUM7QUFDbkYsTUFBTW1CLGlCQUFpQixHQUFJLEdBQUVuQixrQkFBbUIsYUFBWTtBQUM1RCxNQUFNb0IsVUFBVSxHQUFJLEdBQUVwQixrQkFBbUIsYUFBWTtBQUNyRCxNQUFNcUIsV0FBVyxHQUFJLEdBQUVyQixrQkFBbUIsY0FBYTtBQUN2RCxNQUFNc0Isd0JBQXdCLEdBQUcsRUFBRTtBQUNuQyxNQUFNQyxnQkFBZ0IsR0FBRyxHQUFHO0FBQzVCLE1BQU1DLG9CQUFvQixHQUFHLGlCQUFpQjtBQUM5QyxNQUFNQyx3QkFBd0IsR0FBRyxDQUMvQix5RUFBeUUsRUFDekUsNEVBQTRFLENBQzdFO0FBRUQsTUFBTUMsdUJBQXVCLEdBQUcsNkNBQTZDO0FBRTdFLE1BQU1DLFFBQVEsR0FBRyxDQUFDLENBQUM7QUFrQm5CQSxRQUFRLENBQUNDLHlCQUF5QixHQUFHLGVBQWVBLHlCQUF5QixDQUFFQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLEVBQUU7RUFDeEYsSUFBSSxNQUFNLElBQUksQ0FBQ0MsYUFBYSxDQUFDOUIsa0JBQWtCLENBQUMsRUFBRTtJQUNoRCxPQUFPLElBQUk7RUFDYjtFQUVBK0IsZUFBRyxDQUFDQyxLQUFLLENBQUMsOEJBQThCLENBQUM7RUFDekMsTUFBTTtJQUNKQyxPQUFPLEdBQUcsSUFBSTtJQUNkQyx1QkFBdUIsR0FBRztFQUM1QixDQUFDLEdBQUdMLElBQUk7RUFDUixJQUFJTSxVQUFVO0VBQ2QsSUFBSUQsdUJBQXVCLEVBQUU7SUFDM0IsSUFBSTtNQUNGLENBQUM7UUFBQ0M7TUFBVSxDQUFDLEdBQUcsTUFBTSxJQUFJLENBQUNDLDRCQUE0QixFQUFFO0lBQzNELENBQUMsQ0FBQyxPQUFPQyxDQUFDLEVBQUU7TUFDVk4sZUFBRyxDQUFDTyxJQUFJLENBQUUsZ0RBQStDRCxDQUFDLENBQUNFLE9BQVEsRUFBQyxDQUFDO0lBQ3ZFO0VBQ0Y7RUFDQSxNQUFNLElBQUksQ0FBQ0MsUUFBUSxDQUFDO0lBQ2xCQyxHQUFHLEVBQUV6QyxrQkFBa0I7SUFDdkIwQyxRQUFRLEVBQUV6Qyw2QkFBNkI7SUFDdkMwQyxNQUFNLEVBQUUsNEJBQTRCO0lBQ3BDQyxRQUFRLEVBQUUsa0NBQWtDO0lBQzVDQyxPQUFPLEVBQUUsS0FBSztJQUNkQyxhQUFhLEVBQUU7RUFDakIsQ0FBQyxDQUFDO0VBQ0YsSUFBSTtJQUNGLE1BQU0sSUFBQUMsMEJBQWdCLEVBQUMsWUFBWSxNQUFNLElBQUksQ0FBQ2pCLGFBQWEsQ0FBQzlCLGtCQUFrQixDQUFDLEVBQUU7TUFDL0VnRCxNQUFNLEVBQUVmLE9BQU87TUFDZmdCLFVBQVUsRUFBRTtJQUNkLENBQUMsQ0FBQztJQUNGLElBQUlmLHVCQUF1QixJQUFJQyxVQUFVLEVBQUU7TUFDekMsSUFBSTtRQUNGLE1BQU0sSUFBSSxDQUFDZSxXQUFXLENBQUNmLFVBQVUsQ0FBQztNQUNwQyxDQUFDLENBQUMsT0FBT0UsQ0FBQyxFQUFFO1FBQ1ZOLGVBQUcsQ0FBQ08sSUFBSSxDQUFFLGdEQUErQ0QsQ0FBQyxDQUFDRSxPQUFRLEVBQUMsQ0FBQztNQUN2RTtJQUNGO0lBQ0EsT0FBTyxJQUFJO0VBQ2IsQ0FBQyxDQUFDLE9BQU9ZLEdBQUcsRUFBRTtJQUNaLE1BQU0sSUFBSUMsS0FBSyxDQUFFLDRDQUEyQ25CLE9BQVEsSUFBRyxDQUFDO0VBQzFFO0FBQ0YsQ0FBQztBQVNETixRQUFRLENBQUMwQixZQUFZLEdBQUcsZUFBZUEsWUFBWSxDQUFFQyxFQUFFLEVBQUVDLFVBQVUsR0FBRyxLQUFLLEVBQUU7RUFDM0UsSUFBSUEsVUFBVSxFQUFFO0lBRWQsTUFBTSxJQUFJLENBQUNDLEtBQUssQ0FBQyxDQUFDLEtBQUssRUFBRSxNQUFNLEVBQUVGLEVBQUUsR0FBRyxRQUFRLEdBQUcsU0FBUyxDQUFDLEVBQUU7TUFDM0RHLFVBQVUsRUFBRSxPQUFNLElBQUksQ0FBQ0MsV0FBVyxFQUFFLElBQUc7SUFDekMsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxNQUFNO0lBQ0wsTUFBTSxJQUFJLENBQUM5Qix5QkFBeUIsQ0FBQztNQUFDTSx1QkFBdUIsRUFBRTtJQUFJLENBQUMsQ0FBQztJQUVyRSxNQUFNLElBQUksQ0FBQ3NCLEtBQUssQ0FBQyxDQUNmLElBQUksRUFBRSxXQUFXLEVBQ2pCLElBQUksRUFBRXJELDhCQUE4QixFQUNwQyxJQUFJLEVBQUVELGdDQUFnQyxFQUN0QyxNQUFNLEVBQUUsV0FBVyxFQUFFb0QsRUFBRSxHQUFHLFFBQVEsR0FBRyxTQUFTLENBQy9DLENBQUM7RUFDSjtBQUNGLENBQUM7QUFTRDNCLFFBQVEsQ0FBQ2dDLFlBQVksR0FBRyxlQUFlQSxZQUFZLENBQUVMLEVBQUUsRUFBRUMsVUFBVSxHQUFHLEtBQUssRUFBRTtFQUMzRSxJQUFJQSxVQUFVLEVBQUU7SUFFZCxNQUFNLElBQUksQ0FBQ0MsS0FBSyxDQUFDLENBQUMsS0FBSyxFQUFFLE1BQU0sRUFBRUYsRUFBRSxHQUFHLFFBQVEsR0FBRyxTQUFTLENBQUMsRUFBRTtNQUMzREcsVUFBVSxFQUFFLE9BQU0sSUFBSSxDQUFDQyxXQUFXLEVBQUUsSUFBRztJQUN6QyxDQUFDLENBQUM7RUFDSixDQUFDLE1BQU07SUFDTCxNQUFNLElBQUksQ0FBQzlCLHlCQUF5QixDQUFDO01BQUNNLHVCQUF1QixFQUFFO0lBQUksQ0FBQyxDQUFDO0lBRXJFLE1BQU0sSUFBSSxDQUFDc0IsS0FBSyxDQUFDLENBQ2YsSUFBSSxFQUFFLFdBQVcsRUFDakIsSUFBSSxFQUFFbkQsOEJBQThCLEVBQ3BDLElBQUksRUFBRUQsZ0NBQWdDLEVBQ3RDLE1BQU0sRUFBRSxXQUFXLEVBQUVrRCxFQUFFLEdBQUcsUUFBUSxHQUFHLFNBQVMsQ0FDL0MsQ0FBQztFQUNKO0FBQ0YsQ0FBQztBQWVEM0IsUUFBUSxDQUFDaUMsaUJBQWlCLEdBQUcsZUFBZUEsaUJBQWlCLENBQUVOLEVBQUUsRUFBRTtFQUNqRSxNQUFNLElBQUksQ0FBQ0UsS0FBSyxDQUFDLENBQ2YsSUFBSSxFQUFFLFdBQVcsRUFDakIsSUFBSSxFQUFFakQsd0JBQXdCLEVBQzlCLElBQUksRUFBRUQsMEJBQTBCLEVBQ2hDLE1BQU0sRUFBRSxXQUFXLEVBQUVnRCxFQUFFLEdBQUcsUUFBUSxHQUFHLFNBQVMsQ0FDL0MsQ0FBQztBQUNKLENBQUM7QUFZRDNCLFFBQVEsQ0FBQ2tDLCtCQUErQixHQUFHLGVBQWVBLCtCQUErQixDQUFFQyxRQUFRLEVBQUVDLE9BQU8sRUFBRUMsTUFBTSxHQUFHLElBQUksRUFBRTtFQUMzSCxNQUFNQyxNQUFNLEdBQUcsQ0FDYixJQUFJLEVBQUUsV0FBVyxFQUNqQixJQUFJLEVBQUV4RCxxQkFBcUIsRUFDM0IsSUFBSSxFQUFFRCx1QkFBdUIsRUFDN0IsTUFBTSxFQUFFLE1BQU0sRUFBRXNELFFBQVEsQ0FBQ0ksV0FBVyxFQUFFLEVBQ3RDLE1BQU0sRUFBRSxTQUFTLEVBQUVILE9BQU8sQ0FBQ0ksV0FBVyxFQUFFLENBQ3pDO0VBRUQsSUFBSUgsTUFBTSxFQUFFO0lBQ1ZDLE1BQU0sQ0FBQ0csSUFBSSxDQUFDLE1BQU0sRUFBRSxRQUFRLEVBQUVKLE1BQU0sQ0FBQztFQUN2QztFQUVBLE1BQU0sSUFBSSxDQUFDUixLQUFLLENBQUNTLE1BQU0sQ0FBQztBQUMxQixDQUFDO0FBdUJEdEMsUUFBUSxDQUFDMEMsY0FBYyxHQUFHLGVBQWVBLGNBQWMsQ0FBRUMsUUFBUSxFQUFFZixVQUFVLEdBQUcsS0FBSyxFQUFFO0VBQ3JGLE1BQU1nQixtQkFBbUIsR0FBRyxDQUFDQyxTQUFTLEVBQUVDLFVBQVUsR0FBRyxJQUFJLEtBQUs7SUFDNUQsSUFBSSxDQUFDQyxhQUFJLENBQUNDLFFBQVEsQ0FBQ0wsUUFBUSxDQUFDRSxTQUFTLENBQUMsQ0FBQyxFQUFFO01BQ3ZDLElBQUlDLFVBQVUsRUFBRTtRQUNkLE1BQU0sSUFBSXJCLEtBQUssQ0FBRSxHQUFFb0IsU0FBVSxtQkFBa0IsQ0FBQztNQUNsRDtNQUNBLE9BQU8sSUFBSTtJQUNiO0lBQ0EsTUFBTUksVUFBVSxHQUFHQyxVQUFVLENBQUNQLFFBQVEsQ0FBQ0UsU0FBUyxDQUFDLENBQUM7SUFDbEQsSUFBSSxDQUFDTSxLQUFLLENBQUNGLFVBQVUsQ0FBQyxFQUFFO01BQ3RCLE9BQVEsR0FBRUcsZUFBQyxDQUFDQyxJQUFJLENBQUNKLFVBQVUsRUFBRSxDQUFDLENBQUUsRUFBQztJQUNuQztJQUNBLElBQUlILFVBQVUsRUFBRTtNQUNkLE1BQU0sSUFBSXJCLEtBQUssQ0FBRSxHQUFFb0IsU0FBVSwyQ0FBMEMsR0FDcEUsSUFBR0YsUUFBUSxDQUFDRSxTQUFTLENBQUUsb0JBQW1CLENBQUM7SUFDaEQ7SUFDQSxPQUFPLElBQUk7RUFDYixDQUFDO0VBQ0QsTUFBTVMsU0FBUyxHQUFHVixtQkFBbUIsQ0FBQyxXQUFXLENBQUM7RUFDbEQsTUFBTVcsUUFBUSxHQUFHWCxtQkFBbUIsQ0FBQyxVQUFVLENBQUM7RUFDaEQsTUFBTVksUUFBUSxHQUFHWixtQkFBbUIsQ0FBQyxVQUFVLEVBQUUsS0FBSyxDQUFDO0VBQ3ZELE1BQU1hLEtBQUssR0FBR2IsbUJBQW1CLENBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQztFQUNqRCxJQUFJaEIsVUFBVSxFQUFFO0lBQ2QsTUFBTThCLElBQUksR0FBRyxDQUFDSixTQUFTLEVBQUVDLFFBQVEsQ0FBQztJQUNsQyxJQUFJLENBQUNILGVBQUMsQ0FBQ08sS0FBSyxDQUFDSCxRQUFRLENBQUMsRUFBRTtNQUN0QkUsSUFBSSxDQUFDakIsSUFBSSxDQUFDZSxRQUFRLENBQUM7SUFDckI7SUFDQSxNQUFNSSxVQUFVLEdBQUdDLFFBQVEsQ0FBQ2xCLFFBQVEsQ0FBQ2lCLFVBQVUsRUFBRSxFQUFFLENBQUM7SUFDcEQsSUFBSSxDQUFDRSxNQUFNLENBQUNYLEtBQUssQ0FBQ1MsVUFBVSxDQUFDLElBQUlBLFVBQVUsR0FBRyxDQUFDLElBQUlBLFVBQVUsSUFBSSxFQUFFLEVBQUU7TUFDbkUsSUFBSUYsSUFBSSxDQUFDSyxNQUFNLEdBQUcsQ0FBQyxFQUFFO1FBQ25CTCxJQUFJLENBQUNqQixJQUFJLENBQUUsR0FBRTdDLGdCQUFpQixFQUFDLENBQUM7TUFDbEM7TUFDQThELElBQUksQ0FBQ2pCLElBQUksQ0FBRSxHQUFFbUIsVUFBVyxFQUFDLENBQUM7SUFDNUI7SUFDQSxJQUFJLENBQUNSLGVBQUMsQ0FBQ08sS0FBSyxDQUFDRixLQUFLLENBQUMsRUFBRTtNQUNuQixJQUFJQyxJQUFJLENBQUNLLE1BQU0sR0FBRyxDQUFDLEVBQUU7UUFDbkJMLElBQUksQ0FBQ2pCLElBQUksQ0FBRSxHQUFFN0MsZ0JBQWlCLEVBQUMsQ0FBQztNQUNsQztNQUNBLElBQUk4RCxJQUFJLENBQUNLLE1BQU0sR0FBRyxDQUFDLEVBQUU7UUFDbkJMLElBQUksQ0FBQ2pCLElBQUksQ0FBRSxHQUFFOUMsd0JBQXlCLEVBQUMsQ0FBQztNQUMxQztNQUNBK0QsSUFBSSxDQUFDakIsSUFBSSxDQUFDZ0IsS0FBSyxDQUFDO0lBQ2xCO0lBQ0EsTUFBTSxJQUFJLENBQUNPLG9CQUFvQixFQUFFO0lBQ2pDLE1BQU0sSUFBSSxDQUFDQyxPQUFPLENBQUMsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxHQUFHUCxJQUFJLENBQUMsQ0FBQztJQUVsRCxNQUFNLElBQUksQ0FBQ08sT0FBTyxDQUFDLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsR0FBSVAsSUFBSSxDQUFDUSxHQUFHLENBQUVDLEdBQUcsSUFBS0EsR0FBRyxDQUFDQyxPQUFPLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFFLENBQUMsQ0FBQztFQUMxRixDQUFDLE1BQU07SUFDTCxNQUFNVixJQUFJLEdBQUcsQ0FDWCxJQUFJLEVBQUcsT0FBTSxJQUFJLENBQUMzQixXQUFXLEVBQUUsS0FBSSxFQUFFLEdBQUksMEJBQTBCLEdBQUcsY0FBYyxFQUNwRixJQUFJLEVBQUUsV0FBVyxFQUFFdUIsU0FBUyxFQUM1QixJQUFJLEVBQUUsVUFBVSxFQUFFQyxRQUFRLENBQzNCO0lBQ0QsSUFBSVIsYUFBSSxDQUFDQyxRQUFRLENBQUNRLFFBQVEsQ0FBQyxFQUFFO01BQzNCRSxJQUFJLENBQUNqQixJQUFJLENBQUMsSUFBSSxFQUFFLFVBQVUsRUFBRWUsUUFBUSxDQUFDO0lBQ3ZDO0lBQ0EsSUFBSVQsYUFBSSxDQUFDQyxRQUFRLENBQUNTLEtBQUssQ0FBQyxFQUFFO01BQ3hCQyxJQUFJLENBQUNqQixJQUFJLENBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRWdCLEtBQUssQ0FBQztJQUNqQztJQUNBQyxJQUFJLENBQUNqQixJQUFJLENBQUMxRCxnQkFBZ0IsQ0FBQztJQUMzQixNQUFNLElBQUksQ0FBQzhDLEtBQUssQ0FBQzZCLElBQUksQ0FBQztFQUN4QjtBQUNGLENBQUM7QUFRRDFELFFBQVEsQ0FBQ3FFLGNBQWMsR0FBRyxlQUFlQSxjQUFjLEdBQUk7RUFDekQsTUFBTSxJQUFJLENBQUNwRSx5QkFBeUIsQ0FBQztJQUFDTSx1QkFBdUIsRUFBRTtFQUFJLENBQUMsQ0FBQztFQUVyRSxJQUFJK0QsTUFBTTtFQUNWLElBQUk7SUFDRkEsTUFBTSxHQUFHLE1BQU0sSUFBSSxDQUFDekMsS0FBSyxDQUFDLENBQ3hCLElBQUksRUFBRSxXQUFXLEVBQ2pCLElBQUksRUFBRTdDLGlCQUFpQixFQUN2QixJQUFJLEVBQUVDLHlCQUF5QixDQUNoQyxDQUFDO0VBQ0osQ0FBQyxDQUFDLE9BQU91QyxHQUFHLEVBQUU7SUFDWixNQUFNLElBQUlDLEtBQUssQ0FBRSwrREFBOEQsR0FDNUUsMEdBQXlHLEdBQ3pHLDJEQUEwREQsR0FBRyxDQUFDK0MsTUFBTSxJQUFJL0MsR0FBRyxDQUFDZ0QsTUFBTSxJQUFJaEQsR0FBRyxDQUFDWixPQUFRLEVBQUMsQ0FBQztFQUN6RztFQUVBLE1BQU02RCxLQUFLLEdBQUcxRSx1QkFBdUIsQ0FBQzJFLElBQUksQ0FBQ0osTUFBTSxDQUFDO0VBQ2xELElBQUksQ0FBQ0csS0FBSyxFQUFFO0lBQ1YsTUFBTSxJQUFJaEQsS0FBSyxDQUFFLG9FQUFtRTZDLE1BQU8sRUFBQyxDQUFDO0VBQy9GO0VBQ0EsTUFBTTNCLFFBQVEsR0FBRztJQUNmWSxRQUFRLEVBQUVrQixLQUFLLENBQUMsQ0FBQyxDQUFDO0lBQ2xCbkIsU0FBUyxFQUFFbUIsS0FBSyxDQUFDLENBQUMsQ0FBQztJQUNuQmpCLFFBQVEsRUFBRWlCLEtBQUssQ0FBQyxDQUFDO0VBQ25CLENBQUM7RUFDRHJFLGVBQUcsQ0FBQ0MsS0FBSyxDQUFFLHdCQUF1QnNFLElBQUksQ0FBQ0MsU0FBUyxDQUFDakMsUUFBUSxDQUFFLEVBQUMsQ0FBQztFQUM3RCxPQUFPQSxRQUFRO0FBQ2pCLENBQUM7QUFlRDNDLFFBQVEsQ0FBQzZFLHVCQUF1QixHQUFHLGVBQWVBLHVCQUF1QixDQUFFQyxTQUFTLEdBQUcsS0FBSyxFQUFFO0VBQzVGLE1BQU0sSUFBSSxDQUFDN0UseUJBQXlCLENBQUM7SUFBQ00sdUJBQXVCLEVBQUU7RUFBSSxDQUFDLENBQUM7RUFFckUsSUFBSXdFLGFBQWE7RUFDakIsSUFBSUMsaUJBQWlCO0VBRXJCLElBQUlGLFNBQVMsR0FBRyxDQUFDLEVBQUU7SUFDakIsTUFBTUcsR0FBRyxHQUFHLENBQ1YsR0FBRyxJQUFJLENBQUNDLFVBQVUsQ0FBQ0MsV0FBVyxFQUM5QixRQUFRLEVBQUUsSUFBSSxFQUFFdEYsb0JBQW9CLENBQ3JDO0lBQ0RrRixhQUFhLEdBQUcsSUFBSUssd0JBQVUsQ0FBQyxJQUFJLENBQUNGLFVBQVUsQ0FBQ0csSUFBSSxFQUFFSixHQUFHLENBQUM7SUFDekQsTUFBTUssZUFBZSxHQUFJLCtDQUE4Q1IsU0FBVSxjQUFhLEdBQzNGLHdGQUF1RixHQUN2Rix3RkFBdUYsR0FDdkYsd0JBQXVCO0lBQzFCRSxpQkFBaUIsR0FBRyxJQUFJTyxpQkFBQyxDQUFDLENBQUNDLE9BQU8sRUFBRUMsTUFBTSxLQUFLO01BQzdDQyxVQUFVLENBQUMsTUFBTUQsTUFBTSxDQUFDLElBQUloRSxLQUFLLENBQUM2RCxlQUFlLENBQUMsQ0FBQyxFQUFFUixTQUFTLENBQUM7TUFFL0RDLGFBQWEsQ0FBQ3BELEVBQUUsQ0FBQyxNQUFNLEVBQUUsTUFBTThELE1BQU0sQ0FBQyxJQUFJaEUsS0FBSyxDQUFDNkQsZUFBZSxDQUFDLENBQUMsQ0FBQztNQUNsRSxDQUFDLGNBQWMsRUFBRSxjQUFjLENBQUMsQ0FBQ3BCLEdBQUcsQ0FBRXlCLEdBQUcsSUFBS1osYUFBYSxDQUFDcEQsRUFBRSxDQUFDZ0UsR0FBRyxFQUFHQyxLQUFLLElBQUs7UUFDN0UsSUFBSUEsS0FBSyxDQUFDQyxJQUFJLENBQUVDLElBQUksSUFBS2hHLHdCQUF3QixDQUFDK0YsSUFBSSxDQUFFRSxDQUFDLElBQUtELElBQUksQ0FBQ0UsUUFBUSxDQUFDRCxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUU7VUFDaEZQLE9BQU8sRUFBRTtRQUNYO01BQ0YsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUM7SUFDRixNQUFNVCxhQUFhLENBQUNrQixLQUFLLENBQUMsQ0FBQyxDQUFDO0VBQzlCO0VBRUEsSUFBSTtJQUNGLE1BQU0sSUFBSSxDQUFDcEUsS0FBSyxDQUFDLENBQ2YsSUFBSSxFQUFFLFdBQVcsRUFDakIsSUFBSSxFQUFFN0MsaUJBQWlCLEVBQ3ZCLElBQUksRUFBRUMseUJBQXlCLEVBQy9CLE1BQU0sRUFBRSxhQUFhLEVBQUUsTUFBTSxDQUM5QixDQUFDO0VBQ0osQ0FBQyxDQUFDLE9BQU91QyxHQUFHLEVBQUU7SUFDWixNQUFNLElBQUlDLEtBQUssQ0FBRSw4Q0FBNkMsR0FDM0QsMEdBQXlHLEdBQ3pHLDJEQUEwREQsR0FBRyxDQUFDK0MsTUFBTSxJQUFJL0MsR0FBRyxDQUFDZ0QsTUFBTSxJQUFJaEQsR0FBRyxDQUFDWixPQUFRLEVBQUMsQ0FBQztFQUN6RztFQUVBLElBQUltRSxhQUFhLElBQUlDLGlCQUFpQixFQUFFO0lBQ3RDLE1BQU1rQixLQUFLLEdBQUcsSUFBSUMsZUFBTSxDQUFDQyxLQUFLLEVBQUUsQ0FBQ0gsS0FBSyxFQUFFO0lBQ3hDN0YsZUFBRyxDQUFDQyxLQUFLLENBQUUsaUJBQWdCeUUsU0FBVSxzQ0FBcUMsQ0FBQztJQUMzRSxJQUFJO01BQ0YsTUFBTUUsaUJBQWlCO01BQ3ZCNUUsZUFBRyxDQUFDaUcsSUFBSSxDQUFFLHNEQUFxRCxHQUM1RCxHQUFFSCxLQUFLLENBQUNJLFdBQVcsRUFBRSxDQUFDQyxjQUFjLENBQUNDLE9BQU8sQ0FBQyxDQUFDLENBQUUsSUFBRyxDQUFDO0lBQ3pELENBQUMsU0FBUztNQUNSLElBQUl6QixhQUFhLENBQUMwQixTQUFTLEVBQUU7UUFDM0IsTUFBTTFCLGFBQWEsQ0FBQzJCLElBQUksRUFBRTtNQUM1QjtJQUNGO0VBQ0YsQ0FBQyxNQUFNO0lBQ0x0RyxlQUFHLENBQUNpRyxJQUFJLENBQUMsc0ZBQXNGLENBQUM7RUFDbEc7QUFDRixDQUFDO0FBWURyRyxRQUFRLENBQUMyRyxtQkFBbUIsR0FBRyxlQUFlQSxtQkFBbUIsQ0FBRTNGLE1BQU0sRUFBRTtFQUN6RVosZUFBRyxDQUFDQyxLQUFLLENBQUUsNkJBQTRCVyxNQUFPLEVBQUMsQ0FBQztFQUNoRCxNQUFNLElBQUksQ0FBQzRGLGVBQWUsQ0FBQ25ILFVBQVUsRUFDbkMsWUFBWSxNQUFNLElBQUksQ0FBQ29DLEtBQUssQ0FBQyxDQUFDLE9BQU8sRUFBRSxNQUFNLEVBQUcsSUFBR2IsTUFBTyxHQUFFLENBQUMsQ0FBQyxDQUFDO0FBQ25FLENBQUM7QUFlRGhCLFFBQVEsQ0FBQzZHLFlBQVksR0FBRyxlQUFlQSxZQUFZLEdBQUk7RUFDckR6RyxlQUFHLENBQUNDLEtBQUssQ0FBQywrQkFBK0IsQ0FBQztFQUMxQyxNQUFNLElBQUksQ0FBQ0oseUJBQXlCLENBQUM7SUFBQ00sdUJBQXVCLEVBQUU7RUFBSSxDQUFDLENBQUM7RUFDckUsTUFBTXVHLGlCQUFpQixHQUFHLFlBQVksTUFBTSxJQUFJLENBQUNqRixLQUFLLENBQUMsQ0FDckQsSUFBSSxFQUFFLFdBQVcsRUFDakIsSUFBSSxFQUFFM0Msa0JBQWtCLEVBQ3hCLElBQUksRUFBRUMsMEJBQTBCLENBQ2pDLENBQUM7RUFDRixJQUFJbUYsTUFBTTtFQUNWLElBQUk7SUFDRkEsTUFBTSxHQUFJLE9BQU0sSUFBSSxDQUFDdkMsV0FBVyxFQUFFLEtBQUksRUFBRSxHQUNuQyxNQUFNLElBQUksQ0FBQzZFLGVBQWUsQ0FBQ25ILFVBQVUsRUFBRXFILGlCQUFpQixDQUFDLEdBQ3pELE1BQU1BLGlCQUFpQixFQUFHO0VBQ2pDLENBQUMsQ0FBQyxPQUFPdEYsR0FBRyxFQUFFO0lBQ1osTUFBTSxJQUFJQyxLQUFLLENBQUUsaUVBQWdFLEdBQzlFLDJEQUEwRCxHQUMxRCxtQkFBa0JELEdBQUcsQ0FBQ1osT0FBUSxFQUFDLENBQUM7RUFDckM7RUFFQSxNQUFNNkQsS0FBSyxHQUFHLGdCQUFnQixDQUFDQyxJQUFJLENBQUNKLE1BQU0sQ0FBQztFQUMzQyxJQUFJLENBQUNHLEtBQUssRUFBRTtJQUNWLE1BQU0sSUFBSWhELEtBQUssQ0FBRSxxRUFBb0U2QyxNQUFPLEVBQUMsQ0FBQztFQUNoRztFQUNBLE9BQU9sQixlQUFDLENBQUMyRCxJQUFJLENBQUN0QyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDekIsQ0FBQztBQWlERHpFLFFBQVEsQ0FBQ2dILGdCQUFnQixHQUFHLGVBQWVBLGdCQUFnQixHQUFJO0VBQzdENUcsZUFBRyxDQUFDQyxLQUFLLENBQUMsMEJBQTBCLENBQUM7RUFLckMsTUFBTSxJQUFJLENBQUNKLHlCQUF5QixDQUFDO0lBQUNNLHVCQUF1QixFQUFFO0VBQUksQ0FBQyxDQUFDO0VBQ3JFLElBQUkrRCxNQUFNO0VBQ1YsSUFBSTtJQUNGQSxNQUFNLEdBQUcsTUFBTSxJQUFJLENBQUN6QyxLQUFLLENBQUMsQ0FDeEIsSUFBSSxFQUFFLFdBQVcsRUFDakIsSUFBSSxFQUFFekMsOEJBQThCLENBQ3JDLENBQUM7RUFDSixDQUFDLENBQUMsT0FBT29DLEdBQUcsRUFBRTtJQUNaLE1BQU0sSUFBSUMsS0FBSyxDQUFFLGlEQUFnRCxHQUM5RCw0RUFBMkUsR0FDM0UsbUJBQWtCRCxHQUFHLENBQUNaLE9BQVEsRUFBQyxDQUFDO0VBQ3JDO0VBQ0EsT0FBTyxJQUFBcUcsc0JBQWEsRUFBQzNDLE1BQU0sRUFBRSxlQUFlLENBQUM7QUFDL0MsQ0FBQztBQWdERHRFLFFBQVEsQ0FBQ2tILFVBQVUsR0FBRyxlQUFlQSxVQUFVLENBQUVoSCxJQUFJLEdBQUcsQ0FBQyxDQUFDLEVBQUU7RUFDMURFLGVBQUcsQ0FBQ0MsS0FBSyxDQUFDLG9DQUFvQyxDQUFDO0VBQy9DLE1BQU0sSUFBSSxDQUFDSix5QkFBeUIsQ0FBQztJQUFDTSx1QkFBdUIsRUFBRTtFQUFJLENBQUMsQ0FBQztFQUNyRSxNQUFNbUQsSUFBSSxHQUFHLENBQ1gsSUFBSSxFQUFFLFdBQVcsRUFDakIsSUFBSSxFQUFFckUsaUJBQWlCLEVBQ3ZCLElBQUksRUFBRUMseUJBQXlCLENBQ2hDO0VBQ0QsSUFBSVksSUFBSSxDQUFDaUgsR0FBRyxFQUFFO0lBQ1p6RCxJQUFJLENBQUNqQixJQUFJLENBQUMsTUFBTSxFQUFFLEtBQUssRUFBRXZDLElBQUksQ0FBQ2lILEdBQUcsQ0FBQztFQUNwQztFQUNBLElBQUk3QyxNQUFNO0VBQ1YsSUFBSTtJQUNGQSxNQUFNLEdBQUcsTUFBTSxJQUFJLENBQUN6QyxLQUFLLENBQUM2QixJQUFJLENBQUM7RUFDakMsQ0FBQyxDQUFDLE9BQU9sQyxHQUFHLEVBQUU7SUFDWixNQUFNLElBQUlDLEtBQUssQ0FBRSw0Q0FBMkMsR0FDekQsNEVBQTJFLEdBQzNFLG1CQUFrQkQsR0FBRyxDQUFDWixPQUFRLEVBQUMsQ0FBQztFQUNyQztFQUNBLE9BQU8sSUFBQXFHLHNCQUFhLEVBQUMzQyxNQUFNLEVBQUUsVUFBVSxDQUFDO0FBQzFDLENBQUM7QUFVRHRFLFFBQVEsQ0FBQ29ILFdBQVcsR0FBRyxlQUFlQSxXQUFXLENBQUVDLElBQUksRUFBRTtFQUN2RCxJQUFJakUsZUFBQyxDQUFDTyxLQUFLLENBQUMwRCxJQUFJLENBQUMsRUFBRTtJQUNqQixPQUFPLEtBQUs7RUFDZDtFQUVBQSxJQUFJLEdBQUksR0FBRUEsSUFBSyxFQUFDO0VBQ2hCakgsZUFBRyxDQUFDQyxLQUFLLENBQUUsVUFBUzBDLGFBQUksQ0FBQ3VFLFNBQVMsQ0FBQyxXQUFXLEVBQUVELElBQUksQ0FBQ3RELE1BQU0sRUFBRSxJQUFJLENBQUUsRUFBQyxDQUFDO0VBQ3JFLElBQUksQ0FBQ3NELElBQUksRUFBRTtJQUNULE9BQU8sS0FBSztFQUNkO0VBQ0EsTUFBTSxJQUFJLENBQUNULGVBQWUsQ0FDeEJsSCxXQUFXLEVBQUUsWUFBWSxNQUFNLElBQUksQ0FBQzZILFNBQVMsQ0FBQ0MsU0FBSSxDQUFDQyxNQUFNLENBQUNKLElBQUksQ0FBQyxDQUFDLENBQ2pFO0VBQ0QsT0FBTyxJQUFJO0FBQ2IsQ0FBQztBQVVEckgsUUFBUSxDQUFDMEgsU0FBUyxHQUFHLGVBQWVBLFNBQVMsQ0FBRUMsV0FBVyxFQUFFO0VBQzFEdkgsZUFBRyxDQUFDQyxLQUFLLENBQUUsYUFBWXNILFdBQVksbUJBQWtCLENBQUM7RUFDdEQsTUFBTSxJQUFJLENBQUMxSCx5QkFBeUIsQ0FBQztJQUFDTSx1QkFBdUIsRUFBRTtFQUFJLENBQUMsQ0FBQztFQUNyRSxNQUFNK0QsTUFBTSxHQUFHLE1BQU0sSUFBSSxDQUFDekMsS0FBSyxDQUFDLENBQzlCLElBQUksRUFBRSxXQUFXLEVBQ2pCLElBQUksRUFBRXRDLG1CQUFtQixFQUN6QixJQUFJLEVBQUVDLGlCQUFpQixFQUN2QixNQUFNLEVBQUUsTUFBTSxFQUFFbUksV0FBVyxDQUM1QixDQUFDO0VBQ0YsSUFBSSxDQUFDdkUsZUFBQyxDQUFDNEMsUUFBUSxDQUFDMUIsTUFBTSxFQUFFLFdBQVcsQ0FBQyxFQUFFO0lBQ3BDLE1BQU0sSUFBSTdDLEtBQUssQ0FBRSxpQ0FBZ0NrRyxXQUFZLEtBQUksR0FDOUQsa0RBQWlELENBQUM7RUFDdkQ7QUFDRixDQUFDO0FBQUMsZUFFYTNILFFBQVE7QUFBQSJ9