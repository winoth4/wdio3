"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.UiAutomator = void 0;
require("source-map-support/register");
var _events = _interopRequireDefault(require("events"));
var _support = require("@appium/support");
const log = _support.logger.getLogger('UiAutomator');
class UiAutomator extends _events.default.EventEmitter {
  constructor(adb) {
    if (!adb) {
      log.errorAndThrow('adb is required to instantiate UiAutomator');
    }
    super();
    this.adb = adb;
    this.tempPath = '/data/local/tmp/';
  }
  async start(uiAutomatorBinaryPath, className, startDetector, ...extraParams) {
    let processIsAlive;
    try {
      log.debug('Starting UiAutomator');
      this.changeState(UiAutomator.STATE_STARTING);
      log.debug('Parsing uiautomator jar');
      let jarName = this.parseJarNameFromPath(uiAutomatorBinaryPath);
      await this.adb.push(uiAutomatorBinaryPath, this.tempPath);
      await this.killUiAutomatorOnDevice();
      log.debug('Starting UIAutomator');
      let args = ['shell', 'uiautomator', 'runtest', jarName, '-c', className, ...extraParams];
      this.proc = this.adb.createSubProcess(args);
      this.proc.on('exit', (code, signal) => {
        processIsAlive = false;
        if (this.state !== UiAutomator.STATE_STOPPED && this.state !== UiAutomator.STATE_STOPPING) {
          let msg = `UiAutomator exited unexpectedly with code ${code}, ` + `signal ${signal}`;
          log.error(msg);
        } else if (this.state === UiAutomator.STATE_STOPPING) {
          log.debug('UiAutomator shut down normally');
        }
        this.changeState(UiAutomator.STATE_STOPPED);
      });
      await this.proc.start(startDetector);
      processIsAlive = true;
      this.changeState(UiAutomator.STATE_ONLINE);
      return this.proc;
    } catch (e) {
      this.emit(UiAutomator.EVENT_ERROR, e);
      if (processIsAlive) {
        await this.killUiAutomatorOnDevice();
        await this.proc.stop();
      }
      log.errorAndThrow(e);
    }
  }
  async shutdown() {
    log.debug('Shutting down UiAutomator');
    if (this.state !== UiAutomator.STATE_STOPPED) {
      this.changeState(UiAutomator.STATE_STOPPING);
      await this.proc.stop();
    }
    await this.killUiAutomatorOnDevice();
    this.changeState(UiAutomator.STATE_STOPPED);
  }
  parseJarNameFromPath(binaryPath) {
    let reTest = /.*(\/|\\)(.*\.jar)/.exec(binaryPath);
    if (!reTest) {
      throw new Error(`Unable to parse jar name from ${binaryPath}`);
    }
    let jarName = reTest[2];
    log.debug(`Found jar name: '${jarName}'`);
    return jarName;
  }
  changeState(state) {
    log.debug(`Moving to state '${state}'`);
    this.state = state;
    this.emit(UiAutomator.EVENT_CHANGED, {
      state
    });
  }
  async killUiAutomatorOnDevice() {
    try {
      await this.adb.killProcessesByName('uiautomator');
    } catch (e) {
      log.warn(`Error while killing uiAutomator: ${e}`);
    }
  }
}
exports.UiAutomator = UiAutomator;
UiAutomator.EVENT_ERROR = 'uiautomator_error';
UiAutomator.EVENT_CHANGED = 'stateChanged';
UiAutomator.STATE_STOPPING = 'stopping';
UiAutomator.STATE_STOPPED = 'stopped';
UiAutomator.STATE_STARTING = 'starting';
UiAutomator.STATE_ONLINE = 'online';
var _default = UiAutomator;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJsb2ciLCJsb2dnZXIiLCJnZXRMb2dnZXIiLCJVaUF1dG9tYXRvciIsImV2ZW50cyIsIkV2ZW50RW1pdHRlciIsImNvbnN0cnVjdG9yIiwiYWRiIiwiZXJyb3JBbmRUaHJvdyIsInRlbXBQYXRoIiwic3RhcnQiLCJ1aUF1dG9tYXRvckJpbmFyeVBhdGgiLCJjbGFzc05hbWUiLCJzdGFydERldGVjdG9yIiwiZXh0cmFQYXJhbXMiLCJwcm9jZXNzSXNBbGl2ZSIsImRlYnVnIiwiY2hhbmdlU3RhdGUiLCJTVEFURV9TVEFSVElORyIsImphck5hbWUiLCJwYXJzZUphck5hbWVGcm9tUGF0aCIsInB1c2giLCJraWxsVWlBdXRvbWF0b3JPbkRldmljZSIsImFyZ3MiLCJwcm9jIiwiY3JlYXRlU3ViUHJvY2VzcyIsIm9uIiwiY29kZSIsInNpZ25hbCIsInN0YXRlIiwiU1RBVEVfU1RPUFBFRCIsIlNUQVRFX1NUT1BQSU5HIiwibXNnIiwiZXJyb3IiLCJTVEFURV9PTkxJTkUiLCJlIiwiZW1pdCIsIkVWRU5UX0VSUk9SIiwic3RvcCIsInNodXRkb3duIiwiYmluYXJ5UGF0aCIsInJlVGVzdCIsImV4ZWMiLCJFcnJvciIsIkVWRU5UX0NIQU5HRUQiLCJraWxsUHJvY2Vzc2VzQnlOYW1lIiwid2FybiJdLCJzb3VyY2VzIjpbIi4uLy4uL2xpYi91aWF1dG9tYXRvci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXZlbnRzIGZyb20gJ2V2ZW50cyc7XG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICdAYXBwaXVtL3N1cHBvcnQnO1xuXG5cbmNvbnN0IGxvZyA9IGxvZ2dlci5nZXRMb2dnZXIoJ1VpQXV0b21hdG9yJyk7XG5cbmNsYXNzIFVpQXV0b21hdG9yIGV4dGVuZHMgZXZlbnRzLkV2ZW50RW1pdHRlciB7XG4gIGNvbnN0cnVjdG9yIChhZGIpIHtcbiAgICBpZiAoIWFkYikge1xuICAgICAgbG9nLmVycm9yQW5kVGhyb3coJ2FkYiBpcyByZXF1aXJlZCB0byBpbnN0YW50aWF0ZSBVaUF1dG9tYXRvcicpO1xuICAgIH1cbiAgICBzdXBlcigpO1xuICAgIHRoaXMuYWRiID0gYWRiO1xuICAgIHRoaXMudGVtcFBhdGggPSAnL2RhdGEvbG9jYWwvdG1wLyc7XG4gIH1cblxuICBhc3luYyBzdGFydCAodWlBdXRvbWF0b3JCaW5hcnlQYXRoLCBjbGFzc05hbWUsIHN0YXJ0RGV0ZWN0b3IsIC4uLmV4dHJhUGFyYW1zKSB7XG4gICAgbGV0IHByb2Nlc3NJc0FsaXZlO1xuICAgIHRyeSB7XG4gICAgICBsb2cuZGVidWcoJ1N0YXJ0aW5nIFVpQXV0b21hdG9yJyk7XG4gICAgICB0aGlzLmNoYW5nZVN0YXRlKFVpQXV0b21hdG9yLlNUQVRFX1NUQVJUSU5HKTtcblxuICAgICAgbG9nLmRlYnVnKCdQYXJzaW5nIHVpYXV0b21hdG9yIGphcicpO1xuICAgICAgLy8gZXhwZWN0aW5nIGEgcGF0aCBsaWtlIC9hZHMvYWRzL2Zvby5qYXIgb3IgXFxhc2RcXGFzZFxcZm9vLmphclxuICAgICAgbGV0IGphck5hbWUgPSB0aGlzLnBhcnNlSmFyTmFtZUZyb21QYXRoKHVpQXV0b21hdG9yQmluYXJ5UGF0aCk7XG4gICAgICBhd2FpdCB0aGlzLmFkYi5wdXNoKHVpQXV0b21hdG9yQmluYXJ5UGF0aCwgdGhpcy50ZW1wUGF0aCk7XG5cbiAgICAgIC8vIGtpbGxpbmcgYW55IHVpYXV0b21hdG9yIGV4aXN0aW5nIHByb2Nlc3Nlc1xuICAgICAgYXdhaXQgdGhpcy5raWxsVWlBdXRvbWF0b3JPbkRldmljZSgpO1xuXG4gICAgICBsb2cuZGVidWcoJ1N0YXJ0aW5nIFVJQXV0b21hdG9yJyk7XG4gICAgICBsZXQgYXJncyA9IFsnc2hlbGwnLCAndWlhdXRvbWF0b3InLCAncnVudGVzdCcsIGphck5hbWUsICctYycsIGNsYXNzTmFtZSwgLi4uZXh0cmFQYXJhbXNdO1xuICAgICAgdGhpcy5wcm9jID0gdGhpcy5hZGIuY3JlYXRlU3ViUHJvY2VzcyhhcmdzKTtcblxuICAgICAgLy8gaGFuZGxlIG91dC1vZi1ib3VuZCBleGl0IGJ5IHNpbXBseSBlbWl0dGluZyBhIHN0b3BwZWQgc3RhdGVcbiAgICAgIHRoaXMucHJvYy5vbignZXhpdCcsIChjb2RlLCBzaWduYWwpID0+IHtcbiAgICAgICAgcHJvY2Vzc0lzQWxpdmUgPSBmYWxzZTtcbiAgICAgICAgLy8gY2xlYW51cFxuICAgICAgICBpZiAodGhpcy5zdGF0ZSAhPT0gVWlBdXRvbWF0b3IuU1RBVEVfU1RPUFBFRCAmJlxuICAgICAgICAgICAgdGhpcy5zdGF0ZSAhPT0gVWlBdXRvbWF0b3IuU1RBVEVfU1RPUFBJTkcpIHtcbiAgICAgICAgICBsZXQgbXNnID0gYFVpQXV0b21hdG9yIGV4aXRlZCB1bmV4cGVjdGVkbHkgd2l0aCBjb2RlICR7Y29kZX0sIGAgK1xuICAgICAgICAgICAgICAgICAgICBgc2lnbmFsICR7c2lnbmFsfWA7XG4gICAgICAgICAgbG9nLmVycm9yKG1zZyk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZSA9PT0gVWlBdXRvbWF0b3IuU1RBVEVfU1RPUFBJTkcpIHtcbiAgICAgICAgICBsb2cuZGVidWcoJ1VpQXV0b21hdG9yIHNodXQgZG93biBub3JtYWxseScpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2hhbmdlU3RhdGUoVWlBdXRvbWF0b3IuU1RBVEVfU1RPUFBFRCk7XG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgdGhpcy5wcm9jLnN0YXJ0KHN0YXJ0RGV0ZWN0b3IpO1xuICAgICAgcHJvY2Vzc0lzQWxpdmUgPSB0cnVlO1xuICAgICAgdGhpcy5jaGFuZ2VTdGF0ZShVaUF1dG9tYXRvci5TVEFURV9PTkxJTkUpO1xuICAgICAgcmV0dXJuIHRoaXMucHJvYztcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB0aGlzLmVtaXQoVWlBdXRvbWF0b3IuRVZFTlRfRVJST1IsIGUpO1xuICAgICAgaWYgKHByb2Nlc3NJc0FsaXZlKSB7XG4gICAgICAgIGF3YWl0IHRoaXMua2lsbFVpQXV0b21hdG9yT25EZXZpY2UoKTtcbiAgICAgICAgYXdhaXQgdGhpcy5wcm9jLnN0b3AoKTtcbiAgICAgIH1cbiAgICAgIGxvZy5lcnJvckFuZFRocm93KGUpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHNodXRkb3duICgpIHtcbiAgICBsb2cuZGVidWcoJ1NodXR0aW5nIGRvd24gVWlBdXRvbWF0b3InKTtcbiAgICBpZiAodGhpcy5zdGF0ZSAhPT0gVWlBdXRvbWF0b3IuU1RBVEVfU1RPUFBFRCkge1xuICAgICAgdGhpcy5jaGFuZ2VTdGF0ZShVaUF1dG9tYXRvci5TVEFURV9TVE9QUElORyk7XG4gICAgICBhd2FpdCB0aGlzLnByb2Muc3RvcCgpO1xuICAgIH1cbiAgICBhd2FpdCB0aGlzLmtpbGxVaUF1dG9tYXRvck9uRGV2aWNlKCk7XG4gICAgdGhpcy5jaGFuZ2VTdGF0ZShVaUF1dG9tYXRvci5TVEFURV9TVE9QUEVEKTtcbiAgfVxuXG4gIHBhcnNlSmFyTmFtZUZyb21QYXRoIChiaW5hcnlQYXRoKSB7XG4gICAgbGV0IHJlVGVzdCA9IC8uKihcXC98XFxcXCkoLipcXC5qYXIpLy5leGVjKGJpbmFyeVBhdGgpO1xuICAgIGlmICghcmVUZXN0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuYWJsZSB0byBwYXJzZSBqYXIgbmFtZSBmcm9tICR7YmluYXJ5UGF0aH1gKTtcbiAgICB9XG4gICAgbGV0IGphck5hbWUgPSByZVRlc3RbMl07XG4gICAgbG9nLmRlYnVnKGBGb3VuZCBqYXIgbmFtZTogJyR7amFyTmFtZX0nYCk7XG4gICAgcmV0dXJuIGphck5hbWU7XG4gIH1cblxuICBjaGFuZ2VTdGF0ZSAoc3RhdGUpIHtcbiAgICBsb2cuZGVidWcoYE1vdmluZyB0byBzdGF0ZSAnJHtzdGF0ZX0nYCk7XG4gICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgIHRoaXMuZW1pdChVaUF1dG9tYXRvci5FVkVOVF9DSEFOR0VELCB7c3RhdGV9KTtcbiAgfVxuXG4gIGFzeW5jIGtpbGxVaUF1dG9tYXRvck9uRGV2aWNlICgpIHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5hZGIua2lsbFByb2Nlc3Nlc0J5TmFtZSgndWlhdXRvbWF0b3InKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBsb2cud2FybihgRXJyb3Igd2hpbGUga2lsbGluZyB1aUF1dG9tYXRvcjogJHtlfWApO1xuICAgIH1cbiAgfVxuXG59XG5cblVpQXV0b21hdG9yLkVWRU5UX0VSUk9SID0gJ3VpYXV0b21hdG9yX2Vycm9yJztcblVpQXV0b21hdG9yLkVWRU5UX0NIQU5HRUQgPSAnc3RhdGVDaGFuZ2VkJztcblVpQXV0b21hdG9yLlNUQVRFX1NUT1BQSU5HID0gJ3N0b3BwaW5nJztcblVpQXV0b21hdG9yLlNUQVRFX1NUT1BQRUQgPSAnc3RvcHBlZCc7XG5VaUF1dG9tYXRvci5TVEFURV9TVEFSVElORyA9ICdzdGFydGluZyc7XG5VaUF1dG9tYXRvci5TVEFURV9PTkxJTkUgPSAnb25saW5lJztcblxuXG5leHBvcnQgeyBVaUF1dG9tYXRvciB9O1xuZXhwb3J0IGRlZmF1bHQgVWlBdXRvbWF0b3I7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTtBQUdBLE1BQU1BLEdBQUcsR0FBR0MsZUFBTSxDQUFDQyxTQUFTLENBQUMsYUFBYSxDQUFDO0FBRTNDLE1BQU1DLFdBQVcsU0FBU0MsZUFBTSxDQUFDQyxZQUFZLENBQUM7RUFDNUNDLFdBQVcsQ0FBRUMsR0FBRyxFQUFFO0lBQ2hCLElBQUksQ0FBQ0EsR0FBRyxFQUFFO01BQ1JQLEdBQUcsQ0FBQ1EsYUFBYSxDQUFDLDRDQUE0QyxDQUFDO0lBQ2pFO0lBQ0EsS0FBSyxFQUFFO0lBQ1AsSUFBSSxDQUFDRCxHQUFHLEdBQUdBLEdBQUc7SUFDZCxJQUFJLENBQUNFLFFBQVEsR0FBRyxrQkFBa0I7RUFDcEM7RUFFQSxNQUFNQyxLQUFLLENBQUVDLHFCQUFxQixFQUFFQyxTQUFTLEVBQUVDLGFBQWEsRUFBRSxHQUFHQyxXQUFXLEVBQUU7SUFDNUUsSUFBSUMsY0FBYztJQUNsQixJQUFJO01BQ0ZmLEdBQUcs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